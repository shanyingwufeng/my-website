<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç§‘ä¼æŸ¥ Â· äº§ä¸šæ´å¯Ÿ V2.0 äº¤äº’åŸå‹</title>
<style>
/* ========== CSS Variables (Design Tokens) ========== */
:root {
  --color-primary-50: #EEF2FF;
  --color-primary-100: #DBE4FF;
  --color-primary-200: #BAC8FF;
  --color-primary-300: #8DA6F5;
  --color-primary-400: #5C7EEB;
  --color-primary-500: #3562E3;
  --color-primary-600: #1A46C8;
  --color-primary-700: #0F3298;
  --color-primary-800: #0A2270;
  --color-primary-900: #061548;
  --color-gold-400: #F5B622;
  --color-neutral-0: #FFFFFF;
  --color-neutral-50: #F8F9FC;
  --color-neutral-100: #F0F1F5;
  --color-neutral-200: #E4E6EB;
  --color-neutral-300: #C9CDD4;
  --color-neutral-400: #A6ABB5;
  --color-neutral-500: #808898;
  --color-neutral-600: #606878;
  --color-neutral-700: #3D4456;
  --color-neutral-800: #242B3A;
  --color-neutral-900: #111827;
  --color-success: #10B981;
  --color-warning: #F59E0B;
  --color-error: #EF4444;
  --color-info: #3B82F6;
  --font-family-base: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
  --font-family-data: "DIN Alternate", "DIN", "Roboto", sans-serif;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 4px 6px rgba(0,0,0,0.07), 0 2px 4px rgba(0,0,0,0.04);
  --shadow-lg: 0 10px 15px rgba(0,0,0,0.08), 0 4px 6px rgba(0,0,0,0.03);
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-full: 9999px;
  --navbar-h: 56px;
  --sidebar-w: 220px;
}

/* ========== Reset & Base ========== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 14px; }
body {
  font-family: var(--font-family-base);
  color: var(--color-neutral-700);
  background: var(--color-neutral-50);
  line-height: 1.6;
  overflow-x: hidden;
}
a { color: var(--color-primary-500); text-decoration: none; }
a:hover { text-decoration: underline; }

/* ========== Top Navbar ========== */
.navbar {
  position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
  height: var(--navbar-h); background: var(--color-neutral-900);
  display: flex; align-items: center; padding: 0 24px;
  box-shadow: var(--shadow-sm);
}
.navbar-logo {
  width: var(--sidebar-w); display: flex; align-items: center;
  flex-shrink: 0; font-size: 18px; font-weight: 700;
  letter-spacing: 1px; color: #CBD5E1;
}
.navbar-menu { display: flex; gap: 32px; margin-left: 0; }
.navbar-menu a {
  color: rgba(255,255,255,0.75); font-size: 14px; font-weight: 500;
  text-decoration: none; padding: 16px 0; border-bottom: 2px solid transparent;
  transition: all 150ms;
}
.navbar-menu a:hover { color: #fff; text-decoration: none; }
.navbar-menu a.active {
  color: #fff; border-bottom-color: var(--color-primary-400);
}
.navbar-right {
  margin-left: auto; display: flex; align-items: center; gap: 16px;
}
.navbar-search {
  background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.15);
  border-radius: var(--radius-full); padding: 6px 16px; color: #fff;
  font-size: 13px; width: 200px; outline: none;
}
.navbar-search::placeholder { color: rgba(255,255,255,0.4); }
.navbar-icon {
  width: 32px; height: 32px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  color: rgba(255,255,255,0.75); cursor: pointer; font-size: 16px;
}
.navbar-avatar {
  width: 32px; height: 32px; border-radius: 50%;
  background: var(--color-primary-600); color: #fff;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 600;
}

/* ========== Layout ========== */
.layout { display: flex; padding-top: var(--navbar-h); min-height: 100vh; }
.sidebar {
  width: var(--sidebar-w); background: var(--color-neutral-0);
  border-right: 1px solid var(--color-neutral-200);
  position: fixed; top: var(--navbar-h); bottom: 0; left: 0;
  overflow-y: auto; z-index: 200; flex-shrink: 0;
}
.main-content {
  margin-left: var(--sidebar-w); flex: 1; padding: 24px;
  min-height: calc(100vh - var(--navbar-h));
}

/* ========== Sidebar Styles ========== */
.sidebar-search {
  padding: 16px; border-bottom: 1px solid var(--color-neutral-100);
}
.sidebar-search input {
  width: 100%; padding: 8px 12px; border: 1px solid var(--color-neutral-200);
  border-radius: var(--radius-sm); font-size: 13px; outline: none;
  background: var(--color-neutral-50);
}
.sidebar-search input:focus { border-color: var(--color-primary-500); }
.sidebar-nav { padding: 8px 0; }
.sidebar-group { margin-bottom: 4px; }
.sidebar-group-title {
  padding: 10px 16px 6px; font-size: 13px; font-weight: 600;
  color: var(--color-neutral-800); display: flex; align-items: center;
  gap: 6px; cursor: pointer; user-select: none;
}
.sidebar-group-title .arrow {
  font-size: 10px; transition: transform 200ms; color: var(--color-neutral-400);
}
.sidebar-group-title .arrow.open { transform: rotate(90deg); }
.sidebar-group-title:hover { color: var(--color-primary-600); }
.sidebar-item {
  display: block; padding: 7px 16px 7px 32px; font-size: 12px;
  color: var(--color-neutral-600); cursor: pointer; transition: all 150ms;
  border-left: 3px solid transparent; text-decoration: none;
}
.sidebar-item:hover {
  background: var(--color-neutral-50); color: var(--color-primary-600);
  text-decoration: none;
}
.sidebar-item.active {
  background: var(--color-primary-50); color: var(--color-primary-600);
  border-left-color: var(--color-primary-600); font-weight: 500;
}
.sidebar-children { display: none; }
.sidebar-children.open { display: block; }

/* ========== Page Header / Breadcrumb ========== */
.breadcrumb {
  font-size: 12px; color: var(--color-neutral-500); margin-bottom: 16px;
  display: flex; align-items: center; gap: 6px;
}
.breadcrumb a { color: var(--color-neutral-500); }
.breadcrumb a:hover { color: var(--color-primary-500); }
.breadcrumb .sep { color: var(--color-neutral-300); }
.breadcrumb .current { color: var(--color-neutral-800); }

/* ========== Page: äº§ä¸šå¯¼èˆª ========== */
.page { display: none; }
.page.active { display: block; }

.nav-page-title {
  font-size: 20px; font-weight: 600; color: var(--color-neutral-800);
  margin-bottom: 24px; display: flex; align-items: center; gap: 8px;
}
.nav-page-title .icon {
  width: 28px; height: 28px; background: var(--color-primary-600);
  border-radius: var(--radius-sm); color: #fff; display: flex;
  align-items: center; justify-content: center; font-size: 14px;
}

/* Category Section */
.category-section { margin-bottom: 32px; }
.category-title {
  font-size: 16px; font-weight: 600; color: var(--color-neutral-800);
  margin-bottom: 16px; padding-bottom: 8px;
  border-bottom: 2px solid var(--color-primary-600);
  display: inline-block;
}

/* Industry Cards Grid */
.cards-grid {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px;
}
.industry-card {
  background: var(--color-neutral-0); border: 1px solid var(--color-neutral-200);
  border-radius: var(--radius-md); padding: 20px;
  cursor: pointer; transition: all 200ms; text-decoration: none; color: inherit;
  display: flex; align-items: center; gap: 14px;
}
.industry-card:hover {
  box-shadow: var(--shadow-md); transform: translateY(-2px);
  border-color: var(--color-primary-200); text-decoration: none;
}
.industry-card .card-icon {
  width: 44px; height: 44px; border-radius: var(--radius-md);
  background: linear-gradient(135deg, var(--color-primary-50), var(--color-primary-100));
  display: flex; align-items: center; justify-content: center;
  font-size: 20px; flex-shrink: 0;
}
.industry-card .card-info { flex: 1; min-width: 0; }
.industry-card .card-name {
  font-size: 14px; font-weight: 600; color: var(--color-neutral-800);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.industry-card .card-count {
  font-size: 12px; color: var(--color-neutral-500); margin-top: 4px;
}
.industry-card .card-count span {
  font-family: var(--font-family-data); color: var(--color-primary-600);
  font-weight: 600;
}

/* ========== Page: äº§ä¸šé“¾/äº§ä¸š/ç»†åˆ†è¡Œä¸šä¸»é¡µ ========== */
.chain-header {
  background: var(--color-neutral-0); border-radius: var(--radius-lg);
  padding: 24px; margin-bottom: 16px; box-shadow: var(--shadow-sm);
}
.chain-title {
  font-size: 22px; font-weight: 700; color: var(--color-neutral-900);
  margin-bottom: 4px; display: flex; align-items: center; gap: 10px;
}
.chain-title .level-tag {
  font-size: 11px; padding: 2px 10px; border-radius: var(--radius-full);
  background: var(--color-primary-50); color: var(--color-primary-600);
  font-weight: 500;
}
.chain-desc-wrap { margin-top: 10px; position: relative; }
.chain-desc {
  font-size: 13px; color: var(--color-neutral-600); line-height: 1.8;
  overflow: hidden; transition: max-height 300ms;
}
.chain-desc.collapsed { max-height: 26px; }
.chain-desc-toggle {
  font-size: 12px; color: var(--color-primary-500); cursor: pointer;
  margin-top: 4px; display: inline-flex; align-items: center; gap: 4px;
}
.chain-back {
  float: right; font-size: 13px; color: var(--color-primary-500);
  cursor: pointer; display: flex; align-items: center; gap: 4px;
}

/* Tab Navigation */
.tab-nav {
  display: flex; gap: 0; background: var(--color-neutral-0);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  border-bottom: 1px solid var(--color-neutral-200);
  padding: 0 24px; box-shadow: var(--shadow-sm);
}
.tab-nav .tab-item {
  padding: 14px 20px; font-size: 14px; font-weight: 500;
  color: var(--color-neutral-600); cursor: pointer;
  border-bottom: 2px solid transparent; transition: all 150ms;
  white-space: nowrap;
}
.tab-nav .tab-item:hover { color: var(--color-primary-600); }
.tab-nav .tab-item.active {
  color: var(--color-primary-600); border-bottom-color: var(--color-primary-600);
  font-weight: 600;
}

.tab-panel { display: none; }
.tab-panel.active { display: block; }
.tab-body {
  background: var(--color-neutral-0); border-radius: 0 0 var(--radius-lg) var(--radius-lg);
  padding: 24px; box-shadow: var(--shadow-sm);
}

/* ========== Overview Modules ========== */
.module-section {
  margin-bottom: 28px; padding-bottom: 28px;
  border-bottom: 1px solid var(--color-neutral-100);
}
.module-section:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
.module-title {
  font-size: 15px; font-weight: 600; color: var(--color-neutral-800);
  margin-bottom: 16px; display: flex; align-items: center; gap: 8px;
}
.module-title::before {
  content: ''; width: 3px; height: 16px; background: var(--color-primary-600);
  border-radius: 2px;
}
.module-title .info-icon {
  font-size: 13px; color: var(--color-neutral-400); cursor: help;
}

/* Chain Path (header-level) */
.chain-path-header {
  margin-top: 8px;
}
.chain-path-list { display: flex; flex-wrap: wrap; gap: 10px; }
.chain-path-item {
  display: flex; align-items: center; gap: 6px; font-size: 13px;
  background: var(--color-neutral-50); padding: 5px 14px;
  border-radius: var(--radius-full); border: 1px solid var(--color-neutral-200);
}
.chain-path-item a {
  color: var(--color-primary-500); cursor: pointer; font-weight: 500;
}
.chain-path-item .path-sep { color: var(--color-neutral-300); }

/* Region Selector */
.region-selector {
  display: flex; align-items: center; gap: 12px; margin-bottom: 20px;
  padding: 12px 16px; background: var(--color-neutral-50);
  border-radius: var(--radius-md); border: 1px solid var(--color-neutral-100);
}
.region-selector label {
  font-size: 13px; font-weight: 500; color: var(--color-neutral-600);
}
.region-select {
  padding: 6px 12px; border: 1px solid var(--color-neutral-200);
  border-radius: var(--radius-sm); font-size: 13px;
  background: #fff; outline: none; cursor: pointer;
}
.region-select:focus { border-color: var(--color-primary-500); }
.region-current {
  margin-left: auto; font-size: 12px; color: var(--color-neutral-500);
}

/* Map + Table Layout */
.map-table-row { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
.map-placeholder {
  height: 320px; background: linear-gradient(135deg, #e8f0fe, #f0f4ff);
  border-radius: var(--radius-md); display: flex; flex-direction: column;
  align-items: center; justify-content: center; position: relative;
  border: 1px solid var(--color-neutral-200); overflow: hidden;
}
.map-china {
  width: 280px; height: 240px; opacity: 0.15;
}
.map-label {
  position: absolute; font-size: 13px; color: var(--color-neutral-500);
  bottom: 12px; right: 12px;
}

/* Data Table */
.data-table { width: 100%; border-collapse: collapse; font-size: 13px; }
.data-table thead th {
  background: var(--color-neutral-50); padding: 10px 12px;
  text-align: center; font-weight: 600; color: var(--color-neutral-600);
  border-bottom: 1px solid var(--color-neutral-200); font-size: 12px;
  position: sticky; top: 0;
}
.data-table tbody td {
  padding: 9px 12px; border-bottom: 1px solid var(--color-neutral-100);
  color: var(--color-neutral-700); text-align: center;
}
.data-table tbody tr:hover { background: var(--color-primary-50); }
.data-table .num { font-family: var(--font-family-data); text-align: center; }
.data-table .rank {
  width: 24px; height: 24px; border-radius: 50%; display: inline-flex;
  align-items: center; justify-content: center; font-size: 11px; font-weight: 600;
}
.rank-1 { background: var(--color-gold-400); color: #fff; }
.rank-2 { background: #C0C0C0; color: #fff; }
.rank-3 { background: #CD7F32; color: #fff; }
.data-table-wrap {
  max-height: 340px; overflow-y: auto; border: 1px solid var(--color-neutral-200);
  border-radius: var(--radius-md);
}
.data-table tfoot td {
  padding: 10px 12px; text-align: center; font-weight: 600;
  background: var(--color-neutral-50); color: var(--color-neutral-800);
  position: sticky; bottom: 0; border-top: 1px solid var(--color-neutral-200);
  border-bottom: none;
}
.table-footer {
  padding: 10px 12px; background: var(--color-neutral-50);
  font-size: 12px; color: var(--color-neutral-600); font-weight: 500;
  border-top: 1px solid var(--color-neutral-200);
  display: flex; justify-content: space-between;
}

/* Sci-Tech Tags */
.scitech-grid {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;
}
.scitech-card {
  background: var(--color-neutral-0); border: 1px solid var(--color-neutral-200);
  border-radius: var(--radius-md); padding: 14px 16px;
  transition: all 200ms; cursor: pointer;
}
.scitech-card:hover {
  border-color: var(--color-primary-200); box-shadow: var(--shadow-sm);
}
.scitech-card .tag-name {
  font-size: 12px; color: var(--color-neutral-600); margin-bottom: 6px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.scitech-card .tag-value {
  font-family: var(--font-family-data); font-size: 20px; font-weight: 700;
  color: var(--color-primary-600);
}
.scitech-card .tag-unit {
  font-size: 12px; color: var(--color-neutral-500); font-weight: 400;
  margin-left: 2px;
}

/* Charts Row 2x2 */
.charts-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.chart-box {
  border: 1px solid var(--color-neutral-200); border-radius: var(--radius-md);
  padding: 20px; background: var(--color-neutral-0);
}
.chart-box-title {
  font-size: 14px; font-weight: 600; color: var(--color-neutral-800);
  margin-bottom: 16px; display: flex; align-items: center; gap: 6px;
}
.chart-placeholder {
  height: 200px; display: flex; align-items: center; justify-content: center;
  position: relative;
}

/* Simple SVG Chart Helpers */
.donut-chart { position: relative; width: 180px; height: 180px; }
.donut-center {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
  text-align: center;
}
.donut-center .total {
  font-family: var(--font-family-data); font-size: 22px; font-weight: 700;
  color: var(--color-neutral-800);
}
.donut-center .label { font-size: 11px; color: var(--color-neutral-500); }
.chart-legend {
  display: flex; flex-direction: column; gap: 8px; margin-left: 24px;
}
.legend-item { display: flex; align-items: center; gap: 8px; font-size: 12px; }
.legend-dot {
  width: 10px; height: 10px; border-radius: 2px; flex-shrink: 0;
}
.legend-label { color: var(--color-neutral-600); }
.legend-value {
  margin-left: auto; font-family: var(--font-family-data);
  font-weight: 600; color: var(--color-neutral-800);
}

/* Bar Chart Horizontal */
.hbar-chart { width: 100%; }
.hbar-item {
  display: flex; align-items: center; gap: 10px; margin-bottom: 12px;
}
.hbar-label {
  width: 80px; font-size: 12px; color: var(--color-neutral-600);
  text-align: right; flex-shrink: 0;
}
.hbar-track {
  flex: 1; height: 22px; background: var(--color-neutral-100);
  border-radius: var(--radius-sm); overflow: hidden;
}
.hbar-fill {
  height: 100%; border-radius: var(--radius-sm);
  display: flex; align-items: center; justify-content: flex-end;
  padding-right: 8px; font-size: 11px; color: #fff; font-weight: 600;
  font-family: var(--font-family-data); transition: width 600ms ease;
}
.hbar-value {
  font-family: var(--font-family-data); font-size: 12px; font-weight: 600;
  color: var(--color-neutral-700); width: 60px; flex-shrink: 0;
}

/* Area Line Chart (CSS) */
.line-chart-wrap { width: 100%; height: 190px; position: relative; }
.line-chart-svg { width: 100%; height: 100%; }

/* Cross Table (Node Distribution) */
.cross-table-wrap { overflow-x: auto; }
.cross-table {
  width: 100%; border-collapse: collapse; font-size: 12px; min-width: 700px;
}
.cross-table th, .cross-table td {
  padding: 8px 10px; border: 1px solid var(--color-neutral-200);
  text-align: center;
}
.cross-table thead th {
  background: var(--color-neutral-50); font-weight: 600;
  color: var(--color-neutral-600); position: sticky; top: 0;
}
.cross-table tbody th {
  background: var(--color-neutral-50); font-weight: 500;
  color: var(--color-neutral-700); text-align: left;
}
.cross-table td {
  font-family: var(--font-family-data); color: var(--color-neutral-700);
}
.cross-table td.highlight {
  background: var(--color-primary-50); font-weight: 600;
  color: var(--color-primary-600);
}

/* ========== Industry Graph (äº§ä¸šå›¾è°±) ========== */
.graph-toolbar {
  display: flex; align-items: center; gap: 12px; margin-bottom: 20px;
  padding: 10px 16px; background: var(--color-neutral-50);
  border-radius: var(--radius-md); border: 1px solid var(--color-neutral-100);
}
.graph-toolbar .btn-tool {
  padding: 5px 14px; font-size: 12px; border: 1px solid var(--color-neutral-200);
  border-radius: var(--radius-sm); background: #fff; cursor: pointer;
  color: var(--color-neutral-600); transition: all 150ms;
}
.graph-toolbar .btn-tool:hover {
  border-color: var(--color-primary-300); color: var(--color-primary-600);
}
.graph-legend-bar {
  margin-left: auto; display: flex; align-items: center; gap: 16px; font-size: 12px;
}
.graph-legend-dot {
  display: flex; align-items: center; gap: 4px;
}
.graph-legend-dot .dot {
  width: 12px; height: 12px; border-radius: 3px;
}

.graph-container {
  border: 1px solid var(--color-neutral-200); border-radius: var(--radius-md);
  padding: 32px 24px; background: var(--color-neutral-0);
  overflow-x: auto; min-height: 500px;
}
.graph-flow {
  display: flex; gap: 0; align-items: flex-start; justify-content: center;
  min-width: 900px;
}
.graph-stage {
  display: flex; flex-direction: column; align-items: center; min-width: 180px;
}
.graph-stage-label {
  font-size: 14px; font-weight: 600; color: var(--color-neutral-800);
  margin-bottom: 16px; padding: 6px 20px; border-radius: var(--radius-full);
  background: var(--color-neutral-100);
}
.graph-group { margin-bottom: 12px; }
.graph-group-title {
  font-size: 12px; font-weight: 600; color: var(--color-neutral-500);
  margin-bottom: 8px; text-align: center;
}
.graph-nodes { display: flex; flex-direction: column; gap: 6px; align-items: center; }
.graph-node {
  padding: 8px 18px; border-radius: var(--radius-md); font-size: 12px;
  font-weight: 500; cursor: pointer; transition: all 200ms;
  white-space: nowrap; text-align: center; border: 1px solid transparent;
}
.graph-node:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); }
.graph-node.level-chain {
  background: #1E3A8A; color: #fff; font-weight: 600; font-size: 14px;
  padding: 10px 24px;
}
.graph-node.level-industry {
  background: var(--color-info); color: #fff;
}
.graph-node.level-sub {
  background: #93C5FD; color: #1E3A8A;
}
.graph-node.current {
  border: 2px solid var(--color-gold-400); box-shadow: 0 0 0 3px rgba(245,182,34,0.2);
}
.graph-connector {
  display: flex; align-items: center; justify-content: center;
  width: 40px; flex-shrink: 0; position: relative;
}
.graph-connector::before {
  content: ''; position: absolute; top: 50%; left: 0; right: 0;
  border-top: 2px solid var(--color-neutral-300);
}
.graph-connector::after {
  content: 'â†’'; position: relative; z-index: 1;
  background: var(--color-neutral-0); padding: 0 4px;
  color: var(--color-neutral-400); font-size: 16px;
}

/* ========== Enterprise List (é“¾ä¸Šä¼ä¸š/é‡ç‚¹ä¼ä¸š) ========== */
.filter-bar {
  background: var(--color-neutral-50); border-radius: var(--radius-md);
  padding: 16px 20px; margin-bottom: 20px;
  border: 1px solid var(--color-neutral-100);
}
.filter-bar-title {
  font-size: 13px; font-weight: 600; color: var(--color-neutral-700);
  margin-bottom: 12px; display: flex; align-items: center; gap: 6px;
}
.filter-item {
  display: flex; align-items: center; gap: 4px;
}
.filter-item label {
  font-size: 12px; color: var(--color-neutral-600); white-space: nowrap;
}
.filter-item select, .filter-item input {
  padding: 3px 4px; border: 1px solid var(--color-neutral-200);
  border-radius: var(--radius-sm); font-size: 12px; background: #fff;
  outline: none; width: 72px;
}
.filter-item select:focus, .filter-item input:focus {
  border-color: var(--color-primary-500);
}
.filter-actions {
  display: flex; gap: 10px; margin-top: 10px; padding-top: 10px;
  border-top: 1px solid var(--color-neutral-100);
}
.btn {
  padding: 7px 20px; border-radius: var(--radius-sm); font-size: 13px;
  font-weight: 500; cursor: pointer; transition: all 150ms; border: none;
}
.btn-primary {
  background: var(--color-primary-600); color: #fff;
}
.btn-primary:hover { background: var(--color-primary-700); }
.btn-secondary {
  background: #fff; color: var(--color-primary-600);
  border: 1px solid var(--color-primary-600);
}
.btn-secondary:hover { background: var(--color-primary-50); }
.btn-ghost {
  background: transparent; color: var(--color-neutral-600);
  border: 1px solid var(--color-neutral-200);
}
.btn-ghost:hover { background: var(--color-neutral-50); }
.btn-more-filter {
  font-size: 12px; color: var(--color-primary-500); cursor: pointer;
  display: flex; align-items: center; gap: 4px;
}
.filter-group {
  display: flex; align-items: flex-start; gap: 0;
  padding: 6px 0; border-bottom: 1px dashed var(--color-neutral-100);
}
.filter-group:last-of-type { border-bottom: none; }
.filter-group-label {
  font-size: 12px; font-weight: 600; color: var(--color-neutral-700);
  min-width: 60px; height: 22.8px; line-height: 22.8px; flex-shrink: 0;
}
.filter-group-items {
  display: grid; grid-template-columns: repeat(8, auto); gap: 10px 20px;
  flex: 1; justify-content: start;
}
.filter-group-extra { display: none; }
.filter-group-extra.show { display: flex; }

/* Enterprise Table */
.enterprise-header {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 16px;
}
.enterprise-count {
  font-size: 13px; color: var(--color-neutral-600);
}
.enterprise-count strong {
  font-family: var(--font-family-data); color: var(--color-primary-600);
}
.enterprise-actions { display: flex; gap: 10px; }
.ent-table-wrap { overflow-x: auto; border: 1px solid var(--color-neutral-200); border-radius: var(--radius-md); }
.ent-table { width: 100%; border-collapse: collapse; min-width: 960px; }
.ent-table thead th {
  background: var(--color-neutral-50); padding: 11px 12px; text-align: left;
  font-size: 12px; font-weight: 600; color: var(--color-neutral-600);
  border-bottom: 1px solid var(--color-neutral-200);
}
.ent-table tbody td {
  padding: 12px; border-bottom: 1px solid var(--color-neutral-100);
  font-size: 13px;
}
.ent-table tbody tr:hover { background: var(--color-primary-50); }
.ent-table .ent-name {
  color: var(--color-primary-500); cursor: pointer; font-weight: 500;
}
.ent-table .ent-name:hover { text-decoration: underline; }
.ent-table .tags { display: flex; gap: 4px; flex-wrap: wrap; }
.ent-tag {
  font-size: 11px; padding: 1px 6px; border-radius: var(--radius-sm);
  background: var(--color-primary-50); color: var(--color-primary-600);
}
.ent-tag.gold {
  background: #FFF9EB; color: #B57D00;
}

/* Pagination */
.pagination {
  display: flex; align-items: center; justify-content: flex-end;
  gap: 4px; margin-top: 20px; padding-top: 16px;
  border-top: 1px solid var(--color-neutral-100);
}
.page-btn {
  min-width: 32px; height: 32px; border: 1px solid var(--color-neutral-200);
  border-radius: var(--radius-sm); background: #fff;
  display: flex; align-items: center; justify-content: center;
  font-size: 13px; cursor: pointer; transition: all 150ms;
  color: var(--color-neutral-700);
}
.page-btn:hover { background: var(--color-primary-50); border-color: var(--color-primary-200); }
.page-btn.active {
  background: var(--color-primary-600); color: #fff;
  border-color: var(--color-primary-600);
}
.page-btn.disabled {
  color: var(--color-neutral-300); cursor: not-allowed;
}
.page-info { font-size: 12px; color: var(--color-neutral-500); margin-right: 8px; }

/* Key Enterprise Sub Tabs */
.key-ent-tabs {
  display: flex; gap: 0; margin-bottom: 20px;
  border-bottom: 1px solid var(--color-neutral-200);
}
.key-ent-tab {
  padding: 10px 20px; font-size: 13px; font-weight: 500;
  color: var(--color-neutral-600); cursor: pointer;
  border-bottom: 2px solid transparent; transition: all 150ms;
}
.key-ent-tab:hover { color: var(--color-primary-600); }
.key-ent-tab.active {
  color: var(--color-primary-600); border-bottom-color: var(--color-primary-600);
}
.key-ent-tab .count-badge {
  font-size: 11px; background: var(--color-neutral-100); padding: 1px 8px;
  border-radius: var(--radius-full); margin-left: 6px;
  font-family: var(--font-family-data);
}
.key-ent-tab.active .count-badge {
  background: var(--color-primary-50); color: var(--color-primary-600);
}

/* ========== å›¾è¡¨è¯´æ˜ ========== */
.chart-help {
  display: inline-flex; align-items: center; gap: 3px;
  font-size: 11px; color: var(--color-neutral-400); cursor: pointer;
  margin-left: 6px; user-select: none;
}
.chart-help:hover { color: var(--color-primary-500); }
.chart-help-text {
  font-size: 12px; color: var(--color-neutral-500); line-height: 1.6;
  padding: 8px 12px; margin: 6px 0 2px;
  background: var(--color-neutral-50); border-radius: var(--radius-md);
  display: none;
}
.chart-help-text.show { display: block; }

/* ========== Utility ========== */
.text-muted { color: var(--color-neutral-500); }
.text-sm { font-size: 12px; }
.mt-4 { margin-top: 16px; }
.mt-6 { margin-top: 24px; }
.mb-4 { margin-bottom: 16px; }
.mb-6 { margin-bottom: 24px; }
.flex { display: flex; }
.items-center { align-items: center; }
.gap-2 { gap: 8px; }
.gap-3 { gap: 12px; }
.gap-4 { gap: 16px; }

/* Scrollbar */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-thumb {
  background: var(--color-neutral-300); border-radius: 3px;
}
::-webkit-scrollbar-track { background: transparent; }
</style>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>

<!-- ==================== TOP NAVBAR ==================== -->
<nav class="navbar">
  <div class="navbar-logo">AHC ç§‘ä¼æŸ¥</div>
  <div class="navbar-menu">
    <a href="#">é¦–é¡µ</a>
    <a href="#">é«˜çº§æœç´¢</a>
    <a href="#" class="active">äº§ä¸šæ´å¯Ÿ</a>
    <a href="#">åœ°å›¾æœç´¢</a>
    <a href="#">æ‰¹é‡æŸ¥è¯¢</a>
    <a href="#">ä¸‹è½½æ•°æ®</a>
    <a href="#">æ›´å¤šåŠŸèƒ½</a>
  </div>
  <div class="navbar-right">
    <input type="text" class="navbar-search" placeholder="æœç´¢ä¼ä¸šåç§°/ä¿¡ç”¨ä»£ç ...">
    <div class="navbar-icon">ğŸ””</div>
    <div class="navbar-avatar">ç”˜</div>
  </div>
</nav>

<!-- ==================== LAYOUT ==================== -->
<div class="layout">

  <!-- === SIDEBAR === -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-search">
      <input type="text" placeholder="æœç´¢äº§ä¸šé“¾/äº§ä¸š/ç»†åˆ†è¡Œä¸š..." id="sidebarSearch">
    </div>
    <nav class="sidebar-nav" id="sidebarNav">
      <!-- JS generated -->
    </nav>
  </aside>

  <!-- === MAIN CONTENT === -->
  <div class="main-content">

    <!-- ========== PAGE: äº§ä¸šå¯¼èˆª ========== -->
    <div class="page active" id="page-nav">
      <div id="navCardsContainer">
        <!-- JS generated -->
      </div>
    </div>

    <!-- ========== PAGE: äº§ä¸šé“¾ä¸»é¡µ (Template) ========== -->
    <div class="page" id="page-chain">
      <div class="breadcrumb">
        <a href="#" onclick="showPage('nav');return false;">äº§ä¸šæ´å¯Ÿ</a>
        <span class="sep">/</span>
        <span class="current" id="chainBreadcrumb">æ–°èƒ½æºæ±½è½¦</span>
      </div>

      <!-- Chain Header -->
      <div class="chain-header">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;">
          <div class="chain-title">
            <span id="chainPageTitle">æ–°èƒ½æºæ±½è½¦</span>
            <span class="level-tag" id="chainLevelTag">äº§ä¸šé“¾</span>
          </div>
          <span class="chain-back" onclick="goUpLevel()">â†© è¿”å›ä¸Šä¸€çº§</span>
        </div>
        <div class="chain-path-header" id="moduleChainPath" style="display:none;">
          <div class="chain-path-list" id="chainPathList"></div>
        </div>
        <div class="chain-desc-wrap">
          <div class="chain-desc collapsed" id="chainDescText">
            æ–°èƒ½æºæ±½è½¦äº§ä¸šé“¾æ˜¯æŒ‡ä»¥ç”µåŠ¨æ±½è½¦ä¸ºæ ¸å¿ƒï¼Œæ¶µç›–åŠ¨åŠ›ç”µæ± ã€ç”µæœºç”µæ§ã€å……ç”µè®¾æ–½ç­‰å…³é”®ç¯èŠ‚çš„å®Œæ•´äº§ä¸šä½“ç³»ã€‚ä¸Šæ¸¸åŒ…æ‹¬é”‚çŸ¿èµ„æºã€æ­£è´Ÿæææ–™ã€ç”µè§£æ¶²ç­‰åŸææ–™ä¾›åº”ï¼›ä¸­æ¸¸æ¶‰åŠåŠ¨åŠ›ç”µæ± åˆ¶é€ ã€ç”µæœºç”µæ§ç³»ç»Ÿç ”å‘ç”Ÿäº§ï¼›ä¸‹æ¸¸åˆ™åŒ…å«æ•´è½¦åˆ¶é€ ã€å……ç”µåŸºç¡€è®¾æ–½å»ºè®¾å’Œè¿è¥æœåŠ¡ã€‚è¯¥äº§ä¸šé“¾å…·æœ‰æŠ€æœ¯å¯†é›†ã€èµ„é‡‘å¯†é›†ã€æ”¿ç­–é©±åŠ¨æ€§å¼ºç­‰ç‰¹ç‚¹ï¼Œæ˜¯å…¨çƒèƒ½æºè½¬å‹å’Œäº§ä¸šå‡çº§çš„é‡è¦æ–¹å‘ã€‚å®‰å¾½çœåœ¨æ–°èƒ½æºæ±½è½¦é¢†åŸŸæ‹¥æœ‰è”šæ¥ã€å¤§ä¼—å®‰å¾½ã€æ¯”äºšè¿ªåˆè‚¥ç­‰æ•´è½¦ä¼ä¸šï¼Œä»¥åŠå›½è½©é«˜ç§‘ç­‰åŠ¨åŠ›ç”µæ± é¾™å¤´ï¼Œå½¢æˆäº†è¾ƒä¸ºå®Œæ•´çš„äº§ä¸šé›†ç¾¤ã€‚
          </div>
          <div class="chain-desc-toggle" onclick="toggleDesc()">
            <span id="descToggleText">å±•å¼€æŸ¥çœ‹æ›´å¤š</span> <span id="descToggleIcon">â–¼</span>
          </div>
        </div>
      </div>

      <!-- Tab Navigation -->
      <div class="tab-nav" id="chainTabNav">
        <div class="tab-item active" data-tab="overview">äº§ä¸šæ¦‚è§ˆ</div>
        <div class="tab-item" data-tab="graph">äº§ä¸šå›¾è°±</div>
        <div class="tab-item" data-tab="enterprises">é“¾ä¸Šä¼ä¸š</div>
        <div class="tab-item" data-tab="keyEnts">é‡ç‚¹ä¼ä¸š</div>
      </div>

      <!-- ===== TAB: äº§ä¸šæ¦‚è§ˆ ===== -->
      <div class="tab-panel active" id="tab-overview">
        <div class="tab-body">

          <!-- Module: åŒºåŸŸé€‰æ‹© -->
          <div class="module-section">
            <div class="region-selector">
              <label>åŒºåŸŸé€‰æ‹©ï¼š</label>
              <select class="region-select" id="regionProvince" onchange="onRegionChange()">
                <option value="">å…¨å›½</option>
                <option value="å®‰å¾½çœ">å®‰å¾½çœ</option>
                <option value="å¹¿ä¸œçœ">å¹¿ä¸œçœ</option>
                <option value="æ±Ÿè‹çœ">æ±Ÿè‹çœ</option>
                <option value="æµ™æ±Ÿçœ">æµ™æ±Ÿçœ</option>
                <option value="ä¸Šæµ·å¸‚">ä¸Šæµ·å¸‚</option>
              </select>
              <select class="region-select" id="regionCity" disabled>
                <option value="">å…¨éƒ¨åŸå¸‚</option>
              </select>
              <select class="region-select" id="regionDistrict" disabled>
                <option value="">å…¨éƒ¨åŒºå¿</option>
              </select>
              <div class="region-current">å½“å‰ï¼š<strong id="regionDisplay">å…¨å›½</strong></div>
            </div>
          </div>

          <!-- Module: åœ°åŒºåˆ†å¸ƒ -->
          <div class="module-section">
            <div class="module-title">åœ°åŒºåˆ†å¸ƒæƒ…å†µ</div>
            <div class="map-table-row">
              <div class="map-placeholder">
                <svg class="map-china" viewBox="0 0 500 400">
                  <path d="M250,20 Q400,50 450,150 Q480,250 420,320 Q350,380 250,370 Q150,380 80,320 Q20,250 50,150 Q100,50 250,20Z" fill="var(--color-primary-200)" opacity="0.3" stroke="var(--color-primary-300)" stroke-width="1"/>
                  <circle cx="380" cy="200" r="15" fill="var(--color-primary-600)" opacity="0.7"/><text x="380" y="204" text-anchor="middle" fill="#fff" font-size="8">ç²¤</text>
                  <circle cx="340" cy="170" r="12" fill="var(--color-primary-500)" opacity="0.7"/><text x="340" y="174" text-anchor="middle" fill="#fff" font-size="8">æµ™</text>
                  <circle cx="310" cy="150" r="13" fill="var(--color-primary-500)" opacity="0.7"/><text x="310" y="154" text-anchor="middle" fill="#fff" font-size="8">è‹</text>
                  <circle cx="290" cy="180" r="14" fill="var(--color-primary-600)" opacity="0.7"/><text x="290" y="184" text-anchor="middle" fill="#fff" font-size="8">çš–</text>
                  <circle cx="200" cy="140" r="10" fill="var(--color-primary-400)" opacity="0.7"/><text x="200" y="144" text-anchor="middle" fill="#fff" font-size="7">è±«</text>
                  <circle cx="160" cy="180" r="11" fill="var(--color-primary-400)" opacity="0.7"/><text x="160" y="184" text-anchor="middle" fill="#fff" font-size="7">å·</text>
                  <circle cx="250" cy="100" r="10" fill="var(--color-primary-400)" opacity="0.7"/><text x="250" y="104" text-anchor="middle" fill="#fff" font-size="7">é²</text>
                  <circle cx="180" cy="90" r="8" fill="var(--color-primary-300)" opacity="0.7"/><text x="180" y="94" text-anchor="middle" fill="#fff" font-size="7">é™•</text>
                </svg>
                <div class="map-label">ğŸ’¡ å®é™…å¼€å‘ä¸­æ¥å…¥EChartsåœ°å›¾ç»„ä»¶</div>
              </div>
              <div>
                <div class="data-table-wrap">
                  <table class="data-table">
                    <thead>
                      <tr><th>æ’å</th><th>åœ°åŒº</th><th>é“¾ä¸Šä¼ä¸š</th><th>é‡ç‚¹ä¼ä¸š</th><th>ç§‘åˆ›ä¼ä¸š</th></tr>
                    </thead>
                    <tfoot>
                      <tr id="regionTableTotalRow">
                        <td>åˆè®¡</td><td></td><td class="num">-</td><td class="num">-</td><td class="num">-</td>
                      </tr>
                    </tfoot>
                    <tbody id="regionTableBody">
                      <!-- JS generated -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- Module: ç§‘åˆ›ä¼ä¸šåˆ†å¸ƒ -->
          <div class="module-section">
            <div class="module-title">ç§‘åˆ›ä¼ä¸šåˆ†å¸ƒ <span class="chart-help" onclick="this.parentElement.nextElementSibling.classList.toggle('show')">â“˜</span></div>
            <div class="chart-help-text">å±•ç¤ºå½“å‰äº§ä¸šä¼ä¸šåœ¨12ç±»ç§‘åˆ›è®¤å®šç»´åº¦ä¸Šçš„åˆ†å¸ƒæƒ…å†µï¼Œåæ˜ äº§ä¸šæ•´ä½“ç§‘æŠ€åˆ›æ–°æ°´å¹³ä¸èµ„è´¨ç»“æ„ã€‚</div>
            <div class="scitech-grid" id="scitechGrid">
              <!-- JS generated -->
            </div>
          </div>

          <!-- Module: 4 Charts 2x2 -->
          <div class="module-section">
            <div class="charts-row">
              <!-- Chart 1: ä¼ä¸šæ•°é‡è¶‹åŠ¿ -->
              <div class="chart-box">
                <div class="chart-box-title">ä¼ä¸šæ•°é‡è¶‹åŠ¿ <span class="chart-help" onclick="this.parentElement.nextElementSibling.classList.toggle('show')">â“˜</span></div>
                <div class="chart-help-text">å±•ç¤ºå½“å‰äº§ä¸šè¿‘åå¹´æ¯å¹´æ–°æˆç«‹ä¼ä¸šçš„æ•°é‡å˜åŒ–ï¼Œåæ˜ äº§ä¸šå‘å±•é€Ÿåº¦ä¸å¸‚åœºçƒ­åº¦èµ°åŠ¿ã€‚</div>
                <div class="chart-placeholder">
                  <svg viewBox="0 0 400 180" style="width:100%;height:100%;">
                    <defs>
                      <linearGradient id="areaGrad" x1="0" y1="0" x2="0" y2="1">
                        <stop offset="0%" stop-color="var(--color-primary-600)" stop-opacity="0.2"/>
                        <stop offset="100%" stop-color="var(--color-primary-600)" stop-opacity="0.02"/>
                      </linearGradient>
                    </defs>
                    <!-- Grid lines -->
                    <line x1="40" y1="20" x2="40" y2="155" stroke="var(--color-neutral-200)" stroke-width="1"/>
                    <line x1="40" y1="155" x2="385" y2="155" stroke="var(--color-neutral-200)" stroke-width="1"/>
                    <line x1="40" y1="110" x2="385" y2="110" stroke="var(--color-neutral-100)" stroke-width="1" stroke-dasharray="4"/>
                    <line x1="40" y1="65" x2="385" y2="65" stroke="var(--color-neutral-100)" stroke-width="1" stroke-dasharray="4"/>
                    <line x1="40" y1="20" x2="385" y2="20" stroke="var(--color-neutral-100)" stroke-width="1" stroke-dasharray="4"/>
                    <!-- Area -->
                    <path d="M55,140 L90,135 L125,128 L160,120 L195,100 L230,70 L265,45 L300,35 L335,50 L370,65 L370,155 L55,155Z" fill="url(#areaGrad)"/>
                    <!-- Line -->
                    <polyline points="55,140 90,135 125,128 160,120 195,100 230,70 265,45 300,35 335,50 370,65" fill="none" stroke="var(--color-primary-600)" stroke-width="2.5" stroke-linejoin="round"/>
                    <!-- Dots -->
                    <circle cx="55" cy="140" r="3" fill="var(--color-primary-600)"/>
                    <circle cx="90" cy="135" r="3" fill="var(--color-primary-600)"/>
                    <circle cx="125" cy="128" r="3" fill="var(--color-primary-600)"/>
                    <circle cx="160" cy="120" r="3" fill="var(--color-primary-600)"/>
                    <circle cx="195" cy="100" r="3" fill="var(--color-primary-600)"/>
                    <circle cx="230" cy="70" r="3" fill="var(--color-primary-600)"/>
                    <circle cx="265" cy="45" r="4" fill="var(--color-primary-600)"/>
                    <circle cx="300" cy="35" r="4" fill="var(--color-primary-600)"/>
                    <circle cx="335" cy="50" r="3" fill="var(--color-primary-600)"/>
                    <circle cx="370" cy="65" r="3" fill="var(--color-primary-600)"/>
                    <!-- Y Labels -->
                    <text x="35" y="158" text-anchor="end" font-size="10" fill="var(--color-neutral-500)">0</text>
                    <text x="35" y="113" text-anchor="end" font-size="10" fill="var(--color-neutral-500)">5k</text>
                    <text x="35" y="68" text-anchor="end" font-size="10" fill="var(--color-neutral-500)">10k</text>
                    <text x="35" y="23" text-anchor="end" font-size="10" fill="var(--color-neutral-500)">15k</text>
                    <!-- X Labels -->
                    <text x="55" y="170" text-anchor="middle" font-size="9" fill="var(--color-neutral-500)">2016</text>
                    <text x="125" y="170" text-anchor="middle" font-size="9" fill="var(--color-neutral-500)">2018</text>
                    <text x="195" y="170" text-anchor="middle" font-size="9" fill="var(--color-neutral-500)">2020</text>
                    <text x="265" y="170" text-anchor="middle" font-size="9" fill="var(--color-neutral-500)">2022</text>
                    <text x="335" y="170" text-anchor="middle" font-size="9" fill="var(--color-neutral-500)">2024</text>
                  </svg>
                </div>
              </div>
              <!-- Chart 2: æ³¨å†Œèµ„æœ¬åˆ†å¸ƒ -->
              <div class="chart-box">
                <div class="chart-box-title">ä¼ä¸šæ³¨å†Œèµ„æœ¬åˆ†å¸ƒ <span class="chart-help" onclick="this.parentElement.nextElementSibling.classList.toggle('show')">â“˜</span></div>
                <div class="chart-help-text">å±•ç¤ºå½“å‰äº§ä¸šä¼ä¸šåœ¨ä¸åŒæ³¨å†Œèµ„æœ¬åŒºé—´çš„æ•°é‡å æ¯”ï¼Œåæ˜ äº§ä¸šæ•´ä½“èµ„æœ¬è§„æ¨¡ç»“æ„ä¸ä¼ä¸šå®åŠ›åˆ†å¸ƒã€‚</div>
                <div class="chart-placeholder" style="justify-content:flex-start;padding-left:20px;">
                  <svg viewBox="0 0 180 180" width="160" height="160">
                    <!-- Donut segments -->
                    <circle cx="90" cy="90" r="70" fill="none" stroke="var(--color-primary-600)" stroke-width="28" stroke-dasharray="88 352" stroke-dashoffset="0" transform="rotate(-90 90 90)"/>
                    <circle cx="90" cy="90" r="70" fill="none" stroke="var(--color-info)" stroke-width="28" stroke-dasharray="75 365" stroke-dashoffset="-88" transform="rotate(-90 90 90)"/>
                    <circle cx="90" cy="90" r="70" fill="none" stroke="var(--color-gold-400)" stroke-width="28" stroke-dasharray="66 374" stroke-dashoffset="-163" transform="rotate(-90 90 90)"/>
                    <circle cx="90" cy="90" r="70" fill="none" stroke="#10B981" stroke-width="28" stroke-dasharray="53 387" stroke-dashoffset="-229" transform="rotate(-90 90 90)"/>
                    <circle cx="90" cy="90" r="70" fill="none" stroke="#8B5CF6" stroke-width="28" stroke-dasharray="158 282" stroke-dashoffset="-282" transform="rotate(-90 90 90)"/>
                    <circle cx="90" cy="90" r="54" fill="#fff"/>
                    <text x="90" y="85" text-anchor="middle" font-size="18" font-weight="700" fill="var(--color-neutral-800)" font-family="DIN Alternate,DIN,Roboto,sans-serif">152,681</text>
                    <text x="90" y="100" text-anchor="middle" font-size="10" fill="var(--color-neutral-500)">ä¼ä¸šæ€»æ•°</text>
                  </svg>
                  <div class="chart-legend" style="margin-left:16px;">
                    <div class="legend-item"><span class="legend-dot" style="background:var(--color-primary-600)"></span><span class="legend-label">100ä¸‡ä»¥å†…</span><span class="legend-value">30,536</span></div>
                    <div class="legend-item"><span class="legend-dot" style="background:var(--color-info)"></span><span class="legend-label">100-200ä¸‡</span><span class="legend-value">25,956</span></div>
                    <div class="legend-item"><span class="legend-dot" style="background:var(--color-gold-400)"></span><span class="legend-label">200-500ä¸‡</span><span class="legend-value">22,902</span></div>
                    <div class="legend-item"><span class="legend-dot" style="background:#10B981"></span><span class="legend-label">500-1000ä¸‡</span><span class="legend-value">18,322</span></div>
                    <div class="legend-item"><span class="legend-dot" style="background:#8B5CF6"></span><span class="legend-label">1000ä¸‡ä»¥ä¸Š</span><span class="legend-value">54,965</span></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="charts-row" style="margin-top:20px;">
              <!-- Chart 3: æˆç«‹å¹´é™åˆ†å¸ƒ (æ¨ªå‘æ¡å½¢å›¾) -->
              <div class="chart-box">
                <div class="chart-box-title">ä¼ä¸šæˆç«‹å¹´é™åˆ†å¸ƒ <span class="chart-help" onclick="this.parentElement.nextElementSibling.classList.toggle('show')">â“˜</span></div>
                <div class="chart-help-text">å±•ç¤ºå½“å‰äº§ä¸šä¼ä¸šæŒ‰å­˜ç»­æ—¶é•¿çš„åˆ†æ®µç»Ÿè®¡ï¼Œåæ˜ äº§ä¸šæˆç†Ÿåº¦ä¸æ–°è€ä¼ä¸šæ›´æ›¿æƒ…å†µã€‚</div>
                <div style="padding:10px 0;">
                  <div class="hbar-item">
                    <span class="hbar-label">1å¹´ä»¥å†…</span>
                    <div class="hbar-track"><div class="hbar-fill" style="width:15%;background:var(--color-primary-600);">  </div></div>
                    <span class="hbar-value">8,234</span>
                  </div>
                  <div class="hbar-item">
                    <span class="hbar-label">1-3å¹´</span>
                    <div class="hbar-track"><div class="hbar-fill" style="width:25%;background:var(--color-info);">  </div></div>
                    <span class="hbar-value">22,156</span>
                  </div>
                  <div class="hbar-item">
                    <span class="hbar-label">3-5å¹´</span>
                    <div class="hbar-track"><div class="hbar-fill" style="width:35%;background:var(--color-gold-400);">  </div></div>
                    <span class="hbar-value">38,170</span>
                  </div>
                  <div class="hbar-item">
                    <span class="hbar-label">5-10å¹´</span>
                    <div class="hbar-track"><div class="hbar-fill" style="width:60%;background:#10B981;">  </div></div>
                    <span class="hbar-value">52,341</span>
                  </div>
                  <div class="hbar-item">
                    <span class="hbar-label">10å¹´ä»¥ä¸Š</span>
                    <div class="hbar-track"><div class="hbar-fill" style="width:40%;background:#8B5CF6;">  </div></div>
                    <span class="hbar-value">31,780</span>
                  </div>
                </div>
              </div>

              <!-- Chart 4: çŸ¥è¯†äº§æƒåˆ†å¸ƒ -->
              <div class="chart-box">
                <div class="chart-box-title">çŸ¥è¯†äº§æƒåˆ†å¸ƒ <span class="chart-help" onclick="this.parentElement.nextElementSibling.classList.toggle('show')">â“˜</span></div>
                <div class="chart-help-text">å±•ç¤ºå½“å‰äº§ä¸šä¼ä¸šæŒæœ‰çš„çŸ¥è¯†äº§æƒæŒ‰ç±»å‹çš„æ•°é‡å æ¯”ï¼Œåæ˜ äº§ä¸šæŠ€æœ¯åˆ›æ–°èƒ½åŠ›ä¸çŸ¥è¯†äº§æƒç»“æ„ã€‚</div>
                <div class="chart-placeholder" style="justify-content:flex-start;padding-left:20px;">
                    <svg viewBox="0 0 180 180" width="160" height="160">
                      <circle cx="90" cy="90" r="70" fill="none" stroke="var(--color-primary-600)" stroke-width="28" stroke-dasharray="132 308" stroke-dashoffset="0" transform="rotate(-90 90 90)"/>
                      <circle cx="90" cy="90" r="70" fill="none" stroke="var(--color-info)" stroke-width="28" stroke-dasharray="110 330" stroke-dashoffset="-132" transform="rotate(-90 90 90)"/>
                      <circle cx="90" cy="90" r="70" fill="none" stroke="var(--color-gold-400)" stroke-width="28" stroke-dasharray="88 352" stroke-dashoffset="-242" transform="rotate(-90 90 90)"/>
                      <circle cx="90" cy="90" r="70" fill="none" stroke="#10B981" stroke-width="28" stroke-dasharray="110 330" stroke-dashoffset="-330" transform="rotate(-90 90 90)"/>
                      <circle cx="90" cy="90" r="54" fill="#fff"/>
                      <text x="90" y="85" text-anchor="middle" font-size="18" font-weight="700" fill="var(--color-neutral-800)" font-family="DIN Alternate,DIN,Roboto,sans-serif">287,654</text>
                      <text x="90" y="100" text-anchor="middle" font-size="10" fill="var(--color-neutral-500)">çŸ¥è¯†äº§æƒæ€»æ•°</text>
                    </svg>
                    <div class="chart-legend" style="margin-left:16px;">
                      <div class="legend-item"><span class="legend-dot" style="background:var(--color-primary-600)"></span><span class="legend-label">å‘æ˜ä¸“åˆ©</span><span class="legend-value">86,296</span></div>
                      <div class="legend-item"><span class="legend-dot" style="background:var(--color-info)"></span><span class="legend-label">å®ç”¨æ–°å‹</span><span class="legend-value">71,914</span></div>
                      <div class="legend-item"><span class="legend-dot" style="background:var(--color-gold-400)"></span><span class="legend-label">å¤–è§‚è®¾è®¡</span><span class="legend-value">57,531</span></div>
                      <div class="legend-item"><span class="legend-dot" style="background:#10B981"></span><span class="legend-label">å•†æ ‡/è½¯è‘—</span><span class="legend-value">71,913</span></div>
                    </div>
                  </div>
              </div>
            </div>
          </div>

          <!-- Module: äº§ä¸šèŠ‚ç‚¹åˆ†å¸ƒ -->
          <div class="module-section" id="moduleNodeDist">
            <div class="module-title">äº§ä¸šèŠ‚ç‚¹åˆ†å¸ƒ <span class="chart-help" onclick="this.parentElement.nextElementSibling.classList.toggle('show')">â“˜</span></div>
            <div class="chart-help-text">å±•ç¤ºå½“å‰äº§ä¸šå„ç»†åˆ†ç¯èŠ‚åœ¨ä¸åŒåœ°åŒºçš„ä¼ä¸šæ•°é‡åˆ†å¸ƒï¼Œå¸®åŠ©è¯†åˆ«å„åœ°åŒºçš„äº§ä¸šä¼˜åŠ¿ç¯èŠ‚ä¸é›†èšç‰¹å¾ã€‚</div>
            <div class="cross-table-wrap">
              <table class="cross-table" id="crossTable">
                <!-- JS generated -->
              </table>
            </div>
          </div>

        </div>
      </div>

      <!-- ===== TAB: äº§ä¸šå›¾è°± ===== -->
      <div class="tab-panel" id="tab-graph">
        <div class="tab-body">
          <div class="graph-toolbar">
            <span class="btn-tool">ğŸ” æ”¾å¤§</span>
            <span class="btn-tool">ğŸ” ç¼©å°</span>
            <span class="btn-tool">â†» é‡ç½®</span>
            <span class="btn-tool" onclick="downloadGraphPNG()">ğŸ“¥ ä¸‹è½½PNG</span>
            <div class="graph-legend-bar">
              <div class="graph-legend-dot"><span class="dot" style="background:#1E3A8A"></span> äº§ä¸šé“¾</div>
              <div class="graph-legend-dot"><span class="dot" style="background:var(--color-info)"></span> äº§ä¸š</div>
              <div class="graph-legend-dot"><span class="dot" style="background:#93C5FD"></span> ç»†åˆ†è¡Œä¸š</div>
            </div>
          </div>
          <div class="graph-container" id="graphContainer">
            <!-- JS generated -->
          </div>
        </div>
      </div>

      <!-- ===== TAB: é“¾ä¸Šä¼ä¸š ===== -->
      <div class="tab-panel" id="tab-enterprises">
        <div class="tab-body">
          <!-- Filter Bar -->
          <div class="filter-bar">
            <div class="filter-bar-title">æ¡ä»¶ç­›é€‰</div>
            <div class="filter-group">
              <div class="filter-group-label">åŸºç¡€æ ‡ç­¾</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>çœä»½åœ°åŒº</label><select><option>å…¨éƒ¨</option><option>å®‰å¾½çœ</option><option>å¹¿ä¸œçœ</option><option>æ±Ÿè‹çœ</option></select></div>
                <div class="filter-item"><label>å›½æ ‡è¡Œä¸š</label><select><option>å…¨éƒ¨</option><option>æ±½è½¦åˆ¶é€ ä¸š</option><option>ç”µæ°”æœºæ¢°åˆ¶é€ </option></select></div>
                <div class="filter-item"><label>æˆ˜ç•¥æ–°å…´äº§ä¸š</label><select><option>å…¨éƒ¨</option><option>æ–°èƒ½æºæ±½è½¦</option><option>èŠ‚èƒ½ç¯ä¿</option></select></div>
                <div class="filter-item"><label>æˆç«‹å¹´é™</label><select><option>å…¨éƒ¨</option><option>1å¹´ä»¥å†…</option><option>1-3å¹´</option><option>3-5å¹´</option><option>5-10å¹´</option><option>10å¹´ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>ç™»è®°çŠ¶æ€</label><select><option>å…¨éƒ¨</option><option>å­˜ç»­</option><option>æ³¨é”€</option><option>åŠé”€</option></select></div>
                <div class="filter-item"><label>æ³¨å†Œèµ„æœ¬</label><select><option>å…¨éƒ¨</option><option>100ä¸‡ä»¥å†…</option><option>100-500ä¸‡</option><option>500-1000ä¸‡</option><option>1000ä¸‡ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>å®ç¼´èµ„æœ¬</label><select><option>å…¨éƒ¨</option><option>100ä¸‡ä»¥å†…</option><option>100-500ä¸‡</option><option>500ä¸‡ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>ä¼ä¸šè§„æ¨¡</label><select><option>å…¨éƒ¨</option><option>å¤§å‹</option><option>ä¸­å‹</option><option>å°å‹</option><option>å¾®å‹</option></select></div>
                <div class="filter-item"><label>è”ç³»ç”µè¯</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>ç”µå­é‚®ç®±</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>å…¬å¸å®˜ç½‘</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">ç§‘åˆ›æ ‡ç­¾</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>ç§‘æŠ€å‹ä¼ä¸š</label><select><option>å…¨éƒ¨</option><option>é«˜æ–°æŠ€æœ¯ä¼ä¸š</option><option>ç§‘æŠ€å‹ä¸­å°</option><option>ä¸“ç²¾ç‰¹æ–°</option><option>çªç¾šä¼ä¸š</option></select></div>
                <div class="filter-item"><label>ç§‘åˆ›ç­‰çº§</label><select><option>å…¨éƒ¨</option><option>Açº§</option><option>Bçº§</option><option>Cçº§</option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">ç»è¥ä¿¡æ¯</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>çº³ç¨äººç±»å‹</label><select><option>å…¨éƒ¨</option><option>ä¸€èˆ¬çº³ç¨äºº</option><option>å°è§„æ¨¡çº³ç¨äºº</option></select></div>
                <div class="filter-item"><label>çº³ç¨ç­‰çº§</label><select><option>å…¨éƒ¨</option><option>Açº§</option><option>Bçº§</option><option>Cçº§</option><option>Dçº§</option></select></div>
                <div class="filter-item"><label>è¥æ”¶è§„æ¨¡</label><select><option>å…¨éƒ¨</option><option>500ä¸‡ä»¥ä¸‹</option><option>500-2000ä¸‡</option><option>2000ä¸‡-1äº¿</option><option>1äº¿ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>å‡€åˆ©æ¶¦ç‡</label><select><option>å…¨éƒ¨</option><option>äºæŸ</option><option>0-5%</option><option>5-15%</option><option>15%ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>èµ„äº§è§„æ¨¡</label><select><option>å…¨éƒ¨</option><option>500ä¸‡ä»¥ä¸‹</option><option>500-5000ä¸‡</option><option>5000ä¸‡-5äº¿</option><option>5äº¿ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>èµ„äº§è´Ÿå€ºç‡</label><select><option>å…¨éƒ¨</option><option>30%ä»¥ä¸‹</option><option>30-50%</option><option>50-70%</option><option>70%ä»¥ä¸Š</option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">çŸ¥è¯†äº§æƒ</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>ä¸“åˆ©æƒ…å†µ</label><select><option>å…¨éƒ¨</option><option>æœ‰å‘æ˜ä¸“åˆ©</option><option>æœ‰å®ç”¨æ–°å‹</option><option>æœ‰å¤–è§‚è®¾è®¡</option></select></div>
                <div class="filter-item"><label>èµ„è´¨è¯ä¹¦</label><select><option>å…¨éƒ¨</option><option>ISOè®¤è¯</option><option>3Cè®¤è¯</option><option>GMPè®¤è¯</option></select></div>
                <div class="filter-item"><label>å•†æ ‡è½¯è‘—</label><select><option>å…¨éƒ¨</option><option>æœ‰å•†æ ‡</option><option>æœ‰è½¯è‘—</option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">èèµ„æƒ…å†µ</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>èèµ„ä¿¡æ¯</label><select><option>å…¨éƒ¨</option><option>å¤©ä½¿è½®</option><option>Aè½®</option><option>Bè½®</option><option>Cè½®åŠä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>ä¸Šå¸‚æ¿å—</label><select><option>å…¨éƒ¨</option><option>ä¸»æ¿</option><option>åˆ›ä¸šæ¿</option><option>ç§‘åˆ›æ¿</option><option>åŒ—äº¤æ‰€</option><option>æ–°ä¸‰æ¿</option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">é£é™©ä¿¡æ¯</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>å¤±ä¿¡è¢«æ‰§è¡Œ</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>è¢«æ‰§è¡Œ</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>é™åˆ¶é«˜æ¶ˆè´¹</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>è£åˆ¤æ–‡ä¹¦</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>ç»è¥å¼‚å¸¸</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>æ¬ ç¨ä¿¡æ¯</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>è¡Œæ”¿å¤„ç½š</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>é‡å¤§ç¨æ”¶è¿æ³•</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>è¢«å‘Šè®°å½•</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>ç»ˆæœ¬æ¡ˆä»¶</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
              </div>
            </div>
            <span class="btn-more-filter" onclick="toggleMoreFilter(this)">â–¶ æ›´å¤šç­›é€‰</span>
            <div class="filter-actions">
              <button class="btn btn-primary">æŸ¥è¯¢</button>
              <button class="btn btn-secondary">é‡ç½®</button>
            </div>
          </div>

          <!-- Enterprise List -->
          <div class="enterprise-header">
            <div class="enterprise-count">å…±æ‰¾åˆ° <strong>152,681</strong> å®¶ä¼ä¸š</div>
            <div class="enterprise-actions">
              <button class="btn btn-ghost">åå•ä¸‹è½½</button>
            </div>
          </div>
          <div class="ent-table-wrap">
          <table class="ent-table">
            <thead>
              <tr>
                <th style="width:50px;">åºå·</th>
                <th style="width:280px;">ä¼ä¸šåç§°</th>
                <th style="width:100px;">æ›¾ç”¨å</th>
                <th style="width:100px;">æ³•å®šä»£è¡¨äºº</th>
                <th style="width:110px;">çœå¸‚</th>
                <th style="width:100px;">æˆç«‹æ—¶é—´</th>
                <th style="width:120px;">æ³¨å†Œèµ„æœ¬ï¼ˆä¸‡å…ƒï¼‰</th>
                <th style="width:120px;">å›½æ ‡è¡Œä¸š</th>
              </tr>
            </thead>
            <tbody id="entTableBody">
              <!-- JS generated -->
            </tbody>
          </table>
          </div>
          <div class="pagination">
            <span class="page-info">å…± 152,681 æ¡ï¼Œæ¯é¡µ 10 æ¡</span>
            <span class="page-btn disabled">â€¹</span>
            <span class="page-btn active">1</span>
            <span class="page-btn">2</span>
            <span class="page-btn">3</span>
            <span class="page-btn">4</span>
            <span class="page-btn">5</span>
            <span class="page-btn">...</span>
            <span class="page-btn">15269</span>
            <span class="page-btn">â€º</span>
          </div>
        </div>
      </div>

      <!-- ===== TAB: é‡ç‚¹ä¼ä¸š ===== -->
      <div class="tab-panel" id="tab-keyEnts">
        <div class="tab-body">
          <div class="key-ent-tabs">
            <div class="key-ent-tab active" data-keytab="pillar">ğŸ› æ”¯æŸ±ä¼ä¸š <span class="count-badge">4,060</span></div>
            <div class="key-ent-tab" data-keytab="important">â­ é‡è¦ä¼ä¸š <span class="count-badge">5,128</span></div>
            <div class="key-ent-tab" data-keytab="potential">ğŸš€ æ½œåŠ›ä¼ä¸š <span class="count-badge">4,606</span></div>
          </div>

          <!-- Key Ent Info -->
          <div id="keyEntInfo" style="background:var(--color-primary-50);padding:12px 16px;border-radius:var(--radius-md);margin-bottom:16px;font-size:12px;color:var(--color-neutral-600);">
            <strong style="color:var(--color-neutral-800);">æ”¯æŸ±ä¼ä¸š</strong>ï¼šåœ¨å½“å‰äº§ä¸šé“¾ä¸­è§„æ¨¡è¾ƒå¤§ã€æŠ—é£é™©èƒ½åŠ›è¾ƒå¼ºä¸”å¯¹ä¸Šä¸‹æ¸¸ä¾›éœ€ç¨³å®šèµ·å…³é”®ä½œç”¨çš„ä¼ä¸šã€‚
          </div>

          <!-- Filter (same as é“¾ä¸Šä¼ä¸š) -->
          <div class="filter-bar">
            <div class="filter-bar-title">æ¡ä»¶ç­›é€‰</div>
            <div class="filter-group">
              <div class="filter-group-label">åŸºç¡€æ ‡ç­¾</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>çœä»½åœ°åŒº</label><select><option>å…¨éƒ¨</option><option>å®‰å¾½çœ</option><option>å¹¿ä¸œçœ</option><option>æ±Ÿè‹çœ</option></select></div>
                <div class="filter-item"><label>å›½æ ‡è¡Œä¸š</label><select><option>å…¨éƒ¨</option><option>æ±½è½¦åˆ¶é€ ä¸š</option><option>ç”µæ°”æœºæ¢°åˆ¶é€ </option></select></div>
                <div class="filter-item"><label>æˆ˜ç•¥æ–°å…´äº§ä¸š</label><select><option>å…¨éƒ¨</option><option>æ–°èƒ½æºæ±½è½¦</option><option>èŠ‚èƒ½ç¯ä¿</option></select></div>
                <div class="filter-item"><label>æˆç«‹å¹´é™</label><select><option>å…¨éƒ¨</option><option>1å¹´ä»¥å†…</option><option>1-3å¹´</option><option>3-5å¹´</option><option>5-10å¹´</option><option>10å¹´ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>ç™»è®°çŠ¶æ€</label><select><option>å…¨éƒ¨</option><option>å­˜ç»­</option><option>æ³¨é”€</option><option>åŠé”€</option></select></div>
                <div class="filter-item"><label>æ³¨å†Œèµ„æœ¬</label><select><option>å…¨éƒ¨</option><option>100ä¸‡ä»¥å†…</option><option>100-500ä¸‡</option><option>500-1000ä¸‡</option><option>1000ä¸‡ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>å®ç¼´èµ„æœ¬</label><select><option>å…¨éƒ¨</option><option>100ä¸‡ä»¥å†…</option><option>100-500ä¸‡</option><option>500ä¸‡ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>ä¼ä¸šè§„æ¨¡</label><select><option>å…¨éƒ¨</option><option>å¤§å‹</option><option>ä¸­å‹</option><option>å°å‹</option><option>å¾®å‹</option></select></div>
                <div class="filter-item"><label>è”ç³»ç”µè¯</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>ç”µå­é‚®ç®±</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>å…¬å¸å®˜ç½‘</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">ç§‘åˆ›æ ‡ç­¾</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>ç§‘æŠ€å‹ä¼ä¸š</label><select><option>å…¨éƒ¨</option><option>é«˜æ–°æŠ€æœ¯ä¼ä¸š</option><option>ç§‘æŠ€å‹ä¸­å°</option><option>ä¸“ç²¾ç‰¹æ–°</option><option>çªç¾šä¼ä¸š</option></select></div>
                <div class="filter-item"><label>ç§‘åˆ›ç­‰çº§</label><select><option>å…¨éƒ¨</option><option>Açº§</option><option>Bçº§</option><option>Cçº§</option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">ç»è¥ä¿¡æ¯</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>çº³ç¨äººç±»å‹</label><select><option>å…¨éƒ¨</option><option>ä¸€èˆ¬çº³ç¨äºº</option><option>å°è§„æ¨¡çº³ç¨äºº</option></select></div>
                <div class="filter-item"><label>çº³ç¨ç­‰çº§</label><select><option>å…¨éƒ¨</option><option>Açº§</option><option>Bçº§</option><option>Cçº§</option><option>Dçº§</option></select></div>
                <div class="filter-item"><label>è¥æ”¶è§„æ¨¡</label><select><option>å…¨éƒ¨</option><option>500ä¸‡ä»¥ä¸‹</option><option>500-2000ä¸‡</option><option>2000ä¸‡-1äº¿</option><option>1äº¿ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>å‡€åˆ©æ¶¦ç‡</label><select><option>å…¨éƒ¨</option><option>äºæŸ</option><option>0-5%</option><option>5-15%</option><option>15%ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>èµ„äº§è§„æ¨¡</label><select><option>å…¨éƒ¨</option><option>500ä¸‡ä»¥ä¸‹</option><option>500-5000ä¸‡</option><option>5000ä¸‡-5äº¿</option><option>5äº¿ä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>èµ„äº§è´Ÿå€ºç‡</label><select><option>å…¨éƒ¨</option><option>30%ä»¥ä¸‹</option><option>30-50%</option><option>50-70%</option><option>70%ä»¥ä¸Š</option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">çŸ¥è¯†äº§æƒ</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>ä¸“åˆ©æƒ…å†µ</label><select><option>å…¨éƒ¨</option><option>æœ‰å‘æ˜ä¸“åˆ©</option><option>æœ‰å®ç”¨æ–°å‹</option><option>æœ‰å¤–è§‚è®¾è®¡</option></select></div>
                <div class="filter-item"><label>èµ„è´¨è¯ä¹¦</label><select><option>å…¨éƒ¨</option><option>ISOè®¤è¯</option><option>3Cè®¤è¯</option><option>GMPè®¤è¯</option></select></div>
                <div class="filter-item"><label>å•†æ ‡è½¯è‘—</label><select><option>å…¨éƒ¨</option><option>æœ‰å•†æ ‡</option><option>æœ‰è½¯è‘—</option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">èèµ„æƒ…å†µ</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>èèµ„ä¿¡æ¯</label><select><option>å…¨éƒ¨</option><option>å¤©ä½¿è½®</option><option>Aè½®</option><option>Bè½®</option><option>Cè½®åŠä»¥ä¸Š</option></select></div>
                <div class="filter-item"><label>ä¸Šå¸‚æ¿å—</label><select><option>å…¨éƒ¨</option><option>ä¸»æ¿</option><option>åˆ›ä¸šæ¿</option><option>ç§‘åˆ›æ¿</option><option>åŒ—äº¤æ‰€</option><option>æ–°ä¸‰æ¿</option></select></div>
              </div>
            </div>
            <div class="filter-group filter-group-extra">
              <div class="filter-group-label">é£é™©ä¿¡æ¯</div>
              <div class="filter-group-items">
                <div class="filter-item"><label>å¤±ä¿¡è¢«æ‰§è¡Œ</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>è¢«æ‰§è¡Œ</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>é™åˆ¶é«˜æ¶ˆè´¹</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>è£åˆ¤æ–‡ä¹¦</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>ç»è¥å¼‚å¸¸</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>æ¬ ç¨ä¿¡æ¯</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>è¡Œæ”¿å¤„ç½š</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>é‡å¤§ç¨æ”¶è¿æ³•</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>è¢«å‘Šè®°å½•</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
                <div class="filter-item"><label>ç»ˆæœ¬æ¡ˆä»¶</label><select><option>å…¨éƒ¨</option><option>æœ‰</option><option>æ— </option></select></div>
              </div>
            </div>
            <span class="btn-more-filter" onclick="toggleMoreFilter(this)">â–¶ æ›´å¤šç­›é€‰</span>
            <div class="filter-actions">
              <button class="btn btn-primary">æŸ¥è¯¢</button>
              <button class="btn btn-secondary">é‡ç½®</button>
            </div>
          </div>

          <div class="enterprise-header">
            <div class="enterprise-count">å…± <strong>4,060</strong> å®¶æ”¯æŸ±ä¼ä¸š</div>
            <div class="enterprise-actions">
              <button class="btn btn-ghost">åå•ä¸‹è½½</button>
            </div>
          </div>
          <div class="ent-table-wrap">
          <table class="ent-table">
            <thead>
              <tr>
                <th style="width:50px;">åºå·</th>
                <th style="width:280px;">ä¼ä¸šåç§°</th>
                <th style="width:100px;">æ³•å®šä»£è¡¨äºº</th>
                <th style="width:110px;">çœå¸‚</th>
                <th style="width:100px;">æˆç«‹æ—¶é—´</th>
                <th style="width:120px;">æ³¨å†Œèµ„æœ¬ï¼ˆä¸‡å…ƒï¼‰</th>
                <th style="width:120px;">å›½æ ‡è¡Œä¸š</th>
                <th style="width:140px;">æ ‡ç­¾</th>
              </tr>
            </thead>
            <tbody id="keyEntTableBody">
              <!-- JS generated -->
            </tbody>
          </table>
          </div>
          <div class="pagination">
            <span class="page-info">å…± 4,060 æ¡</span>
            <span class="page-btn disabled">â€¹</span>
            <span class="page-btn active">1</span>
            <span class="page-btn">2</span>
            <span class="page-btn">3</span>
            <span class="page-btn">...</span>
            <span class="page-btn">406</span>
            <span class="page-btn">â€º</span>
          </div>
        </div>
      </div>

    </div><!-- end page-chain -->

  </div><!-- end main-content -->
</div><!-- end layout -->

<script>
/* ========== DATA ========== */
const INDUSTRY_DATA = [
  { cat: 'æ–°èƒ½æºæ±½è½¦', chains: [
    { name: 'æ–°èƒ½æºæ±½è½¦', count: 152681, icon: 'ğŸš—' },
    { name: 'é”‚ç”µæ± ', count: 38420, icon: 'ğŸ”‹' }
  ]},
  { cat: 'æ–°ä¸€ä»£ä¿¡æ¯æŠ€æœ¯', chains: [
    { name: 'æ–°å‹æ˜¾ç¤º', count: 24530, icon: 'ğŸ–¥' },
    { name: 'é›†æˆç”µè·¯', count: 67890, icon: 'ğŸ’¾' },
    { name: 'ç§»åŠ¨é€šä¿¡', count: 43210, icon: 'ğŸ“¡' },
    { name: 'æ•°æ®', count: 89560, icon: 'ğŸ“Š' }
  ]},
  { cat: 'äººå·¥æ™ºèƒ½', chains: [
    { name: 'äººå·¥æ™ºèƒ½', count: 112340, icon: 'ğŸ¤–' }
  ]},
  { cat: 'é«˜ç«¯è£…å¤‡åˆ¶é€ ', chains: [
    { name: 'æ™ºèƒ½åˆ¶é€ è£…å¤‡', count: 56780, icon: 'âš™ï¸' },
    { name: 'è½¨é“äº¤é€šè£…å¤‡', count: 18920, icon: 'ğŸš„' }
  ]},
  { cat: 'æ–°èƒ½æºåŠç»¿è‰²ä½ç¢³', chains: [
    { name: 'å…ˆè¿›å…‰ä¼', count: 45230, icon: 'â˜€ï¸' },
    { name: 'ç”Ÿç‰©è´¨èƒ½å‘ç”µ', count: 8760, icon: 'ğŸŒ¿' },
    { name: 'é£ç”µ', count: 21340, icon: 'ğŸ’¨' },
    { name: 'æ ¸ç”µ', count: 5670, icon: 'âš›ï¸' },
    { name: 'æ–°å‹å‚¨èƒ½', count: 15890, icon: 'ğŸ”Œ' },
    { name: 'èŠ‚èƒ½ç¯ä¿', count: 78920, icon: 'â™»ï¸' }
  ]},
  { cat: 'æ–°ææ–™', chains: [
    { name: 'æ–°ææ–™', count: 95670, icon: 'ğŸ§ª' }
  ]},
  { cat: 'ä½ç©ºç»æµå’Œå•†ä¸šèˆªå¤©', chains: [
    { name: 'å•†ä¸šèˆªå¤©', count: 6780, icon: 'ğŸš€' },
    { name: 'èˆªç©ºèˆªå¤©è£…å¤‡', count: 12340, icon: 'âœˆï¸' },
    { name: 'å«æ˜Ÿåˆ¶é€ ', count: 3450, icon: 'ğŸ›°' },
    { name: 'ç©ºå¤©ä¿¡æ¯', count: 8920, icon: 'ğŸ“¡' },
    { name: 'ä½ç©ºç»æµ', count: 15670, icon: 'ğŸ›©' }
  ]},
  { cat: 'æ™ºèƒ½å®¶å±…', chains: [
    { name: 'æ™ºèƒ½å®¶ç”µï¼ˆå±…ï¼‰', count: 67890, icon: 'ğŸ ' }
  ]},
  { cat: 'ç”Ÿç‰©åŒ»è¯', chains: [
    { name: 'åŒ»è¯åˆ¶é€ ', count: 45670, icon: 'ğŸ’Š' },
    { name: 'åŒ»ç–—å™¨æ¢°', count: 38920, icon: 'ğŸ¥' }
  ]},
  { cat: 'æœªæ¥äº§ä¸š', chains: [
    { name: 'é‡å­ç§‘æŠ€', count: 2340, icon: 'âš¡' },
    { name: 'ç”Ÿå‘½ç§‘å­¦', count: 18760, icon: 'ğŸ§¬' },
    { name: 'æœªæ¥ç½‘ç»œ', count: 9870, icon: 'ğŸŒ' }
  ]},
  { cat: 'ç‰¹è‰²äº§ä¸š', chains: [
    { name: 'ç”µçº¿ç”µç¼†', count: 34560, icon: 'ğŸ”Œ' },
    { name: 'ç»¿è‰²é£Ÿå“', count: 123450, icon: 'ğŸ¥¬' },
    { name: 'æ•°å­—åˆ›æ„', count: 56780, icon: 'ğŸ¨' }
  ]}
];

const REGION_DATA = [
  { rank: 1, name: 'å¹¿ä¸œçœ', chain: 19873, key: 1794, sci: 2463 },
  { rank: 2, name: 'æ±Ÿè‹çœ', chain: 17514, key: 1521, sci: 2187 },
  { rank: 3, name: 'æµ™æ±Ÿçœ', chain: 15842, key: 1368, sci: 1956 },
  { rank: 4, name: 'å®‰å¾½çœ', chain: 12764, key: 1295, sci: 1743 },
  { rank: 5, name: 'å±±ä¸œçœ', chain: 11253, key: 987, sci: 1432 },
  { rank: 6, name: 'ä¸Šæµ·å¸‚', chain: 9876, key: 1124, sci: 1678 },
  { rank: 7, name: 'æ¹–åŒ—çœ', chain: 8234, key: 756, sci: 1023 },
  { rank: 8, name: 'å››å·çœ', chain: 7651, key: 689, sci: 945 },
  { rank: 9, name: 'åŒ—äº¬å¸‚', chain: 7123, key: 1056, sci: 1534 },
  { rank: 10, name: 'ç¦å»ºçœ', chain: 6543, key: 534, sci: 789 },
];

const SCITECH_TAGS = [
  { name: 'Aè‚¡ä¸Šå¸‚ä¼ä¸š', value: 692562 },
  { name: 'æ–°ä¸‰æ¿ä¼ä¸š', value: 18790 },
  { name: 'é«˜æ–°æŠ€æœ¯ä¼ä¸š', value: 3421 },
  { name: 'ä¼ä¸šæŠ€æœ¯ä¸­å¿ƒ', value: 31895 },
  { name: 'ç§‘æŠ€å‹ä¸­å°ä¼ä¸š', value: 2562 },
  { name: 'åˆ›æ–°å‹ä¸­å°ä¼ä¸š', value: 25428 },
  { name: 'ä¸“ç²¾ç‰¹æ–°ä¼ä¸š', value: 1008 },
  { name: 'ä¸“ç²¾ç‰¹æ–°å°å·¨äºº', value: 7502 },
  { name: 'å›½å®¶æŠ€æœ¯åˆ›æ–°ç¤ºèŒƒ', value: 562 },
  { name: 'çœçº§æŠ€æœ¯åˆ›æ–°ç¤ºèŒƒ', value: 7502 },
  { name: 'åˆ¶é€ ä¸šå•é¡¹å† å†›', value: 692562 },
  { name: 'éšå½¢å† å†›ä¼ä¸š', value: 26180 }
];

const CHAIN_PATH = [
  { chain: 'æ–°èƒ½æºæ±½è½¦', industry: 'å‚¨èƒ½ææ–™', subs: ['æ­£æææ–™', 'è´Ÿæææ–™', 'ç”µè§£æ¶²', 'éš”è†œ'] },
  { chain: 'æ–°èƒ½æºæ±½è½¦', industry: 'æ ¸å¿ƒé›¶éƒ¨ä»¶', subs: ['ç”µæ± é…ä»¶äº§å“', 'ç”µæœºç”µæ§', 'ç”µå­å…ƒå™¨ä»¶'] },
  { chain: 'æ–°èƒ½æºæ±½è½¦', industry: 'æ•´è½¦åˆ¶é€ ', subs: ['çº¯ç”µåŠ¨æ±½è½¦', 'æ··åŠ¨æ±½è½¦', 'æ°¢ç‡ƒæ–™æ±½è½¦'] },
  { chain: 'æ–°èƒ½æºæ±½è½¦', industry: 'æœåŠ¡åŠåº”ç”¨', subs: ['å……æ¢ç”µæœåŠ¡', 'æ±½è½¦åå¸‚åœº', 'å‡ºè¡ŒæœåŠ¡'] }
];

const CROSS_DATA = {
  cols: ['æ­£æææ–™', 'è´Ÿæææ–™', 'ç”µè§£æ¶²', 'éš”è†œ', 'ç”µæ± é…ä»¶', 'ç”µæœºç”µæ§', 'æ•´è½¦åˆ¶é€ '],
  rows: [
    { name: 'å¹¿ä¸œçœ', vals: [4876, 3218, 1876, 987, 2345, 3456, 2115] },
    { name: 'æ±Ÿè‹çœ', vals: [4123, 2876, 1654, 876, 2109, 3012, 1864] },
    { name: 'æµ™æ±Ÿçœ', vals: [3567, 2345, 1432, 756, 1876, 2678, 1188] },
    { name: 'å®‰å¾½çœ', vals: [3210, 2109, 1287, 678, 1654, 2345, 1481] },
    { name: 'å±±ä¸œçœ', vals: [2876, 1987, 1123, 567, 1432, 2109, 1159] },
    { name: 'ä¸Šæµ·å¸‚', vals: [2345, 1654, 987, 512, 1234, 1876, 1268] },
    { name: 'æ¹–åŒ—çœ', vals: [1987, 1432, 876, 423, 1087, 1654, 775] },
    { name: 'å››å·çœ', vals: [1654, 1234, 756, 345, 987, 1432, 1243] },
  ]
};

const ENTERPRISES = [
  { name: 'åˆè‚¥å›½è½©é«˜ç§‘åŠ¨åŠ›èƒ½æºæœ‰é™å…¬å¸', alias: 'å›½è½©é«˜ç§‘', legal: 'æç¼œ', city: 'å®‰å¾½çœåˆè‚¥å¸‚', date: '2006-05-18', capital: 150000, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ' },
  { name: 'è”šæ¥æ±½è½¦ç§‘æŠ€ï¼ˆå®‰å¾½ï¼‰æœ‰é™å…¬å¸', alias: 'è”šæ¥æ±½è½¦', legal: 'ææ–Œ', city: 'å®‰å¾½çœåˆè‚¥å¸‚', date: '2020-02-25', capital: 300000, industry: 'æ±½è½¦åˆ¶é€ ä¸š' },
  { name: 'å¤§ä¼—æ±½è½¦ï¼ˆå®‰å¾½ï¼‰æœ‰é™å…¬å¸', alias: 'å¤§ä¼—å®‰å¾½', legal: 'è‘›çš–é•', city: 'å®‰å¾½çœåˆè‚¥å¸‚', date: '2017-11-16', capital: 500000, industry: 'æ±½è½¦åˆ¶é€ ä¸š' },
  { name: 'æ¯”äºšè¿ªæ±½è½¦å·¥ä¸šæœ‰é™å…¬å¸', alias: '-', legal: 'ç‹ä¼ ç¦', city: 'å¹¿ä¸œçœæ·±åœ³å¸‚', date: '2003-01-22', capital: 2300000, industry: 'æ±½è½¦åˆ¶é€ ä¸š' },
  { name: 'å®å¾·æ—¶ä»£æ–°èƒ½æºç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸', alias: 'å®å¾·æ—¶ä»£', legal: 'æ›¾æ¯“ç¾¤', city: 'ç¦å»ºçœå®å¾·å¸‚', date: '2011-12-16', capital: 232900, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ' },
  { name: 'æ·±åœ³å¸‚æ¯”å…‹åŠ¨åŠ›ç”µæ± æœ‰é™å…¬å¸', alias: '-', legal: 'å¼ æ ‘å…¨', city: 'å¹¿ä¸œçœæ·±åœ³å¸‚', date: '2005-07-13', capital: 80000, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ' },
  { name: 'å¤©æ´¥åŠ›ç¥ç”µæ± è‚¡ä»½æœ‰é™å…¬å¸', alias: 'åŠ›ç¥ç”µæ± ', legal: 'åˆ˜å–œ', city: 'å¤©æ´¥å¸‚æ»¨æµ·æ–°åŒº', date: '1997-12-25', capital: 120000, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ' },
  { name: 'æƒ å·äº¿çº¬é”‚èƒ½è‚¡ä»½æœ‰é™å…¬å¸', alias: 'äº¿çº¬é”‚èƒ½', legal: 'åˆ˜é‡‘æˆ', city: 'å¹¿ä¸œçœæƒ å·å¸‚', date: '2001-06-25', capital: 195600, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ' },
  { name: 'ä¸­åˆ›æ–°èˆªç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸', alias: 'ä¸­åˆ›æ–°èˆª', legal: 'åˆ˜é™ç‘œ', city: 'æ±Ÿè‹çœå¸¸å·å¸‚', date: '2015-09-07', capital: 168000, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ' },
  { name: 'æ¬£æ—ºè¾¾ç”µå­è‚¡ä»½æœ‰é™å…¬å¸', alias: 'æ¬£æ—ºè¾¾', legal: 'ç‹å¨', city: 'å¹¿ä¸œçœæ·±åœ³å¸‚', date: '1997-12-16', capital: 340000, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ' },
];

const KEY_ENTERPRISES = [
  { name: 'æ¯”äºšè¿ªæ±½è½¦å·¥ä¸šæœ‰é™å…¬å¸', legal: 'ç‹ä¼ ç¦', city: 'å¹¿ä¸œçœæ·±åœ³å¸‚', date: '2003-01-22', capital: 2300000, industry: 'æ±½è½¦åˆ¶é€ ä¸š', tags: ['ä¸Šäº¤æ‰€ä¸»æ¿', 'é«˜æ–°æŠ€æœ¯'] },
  { name: 'å®å¾·æ—¶ä»£æ–°èƒ½æºç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸', legal: 'æ›¾æ¯“ç¾¤', city: 'ç¦å»ºçœå®å¾·å¸‚', date: '2011-12-16', capital: 232900, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ', tags: ['åˆ›ä¸šæ¿', 'ä¸“ç²¾ç‰¹æ–°'] },
  { name: 'åˆè‚¥å›½è½©é«˜ç§‘åŠ¨åŠ›èƒ½æºæœ‰é™å…¬å¸', legal: 'æç¼œ', city: 'å®‰å¾½çœåˆè‚¥å¸‚', date: '2006-05-18', capital: 150000, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ', tags: ['ä¸Šäº¤æ‰€ä¸»æ¿'] },
  { name: 'è”šæ¥æ±½è½¦ç§‘æŠ€ï¼ˆå®‰å¾½ï¼‰æœ‰é™å…¬å¸', legal: 'ææ–Œ', city: 'å®‰å¾½çœåˆè‚¥å¸‚', date: '2020-02-25', capital: 300000, industry: 'æ±½è½¦åˆ¶é€ ä¸š', tags: ['æ¸¯äº¤æ‰€'] },
  { name: 'æƒ å·äº¿çº¬é”‚èƒ½è‚¡ä»½æœ‰é™å…¬å¸', legal: 'åˆ˜é‡‘æˆ', city: 'å¹¿ä¸œçœæƒ å·å¸‚', date: '2001-06-25', capital: 195600, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ', tags: ['åˆ›ä¸šæ¿', 'é«˜æ–°æŠ€æœ¯'] },
  { name: 'ä¸­åˆ›æ–°èˆªç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸', legal: 'åˆ˜é™ç‘œ', city: 'æ±Ÿè‹çœå¸¸å·å¸‚', date: '2015-09-07', capital: 168000, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ', tags: ['æ¸¯äº¤æ‰€'] },
  { name: 'å¤§ä¼—æ±½è½¦ï¼ˆå®‰å¾½ï¼‰æœ‰é™å…¬å¸', legal: 'è‘›çš–é•', city: 'å®‰å¾½çœåˆè‚¥å¸‚', date: '2017-11-16', capital: 500000, industry: 'æ±½è½¦åˆ¶é€ ä¸š', tags: ['å¤–èµ„ä¼ä¸š'] },
  { name: 'å¤©æ´¥åŠ›ç¥ç”µæ± è‚¡ä»½æœ‰é™å…¬å¸', legal: 'åˆ˜å–œ', city: 'å¤©æ´¥å¸‚æ»¨æµ·æ–°åŒº', date: '1997-12-25', capital: 120000, industry: 'ç”µæ°”æœºæ¢°åˆ¶é€ ', tags: ['é«˜æ–°æŠ€æœ¯', 'ä¸“ç²¾ç‰¹æ–°'] },
];

/* ========== RENDER FUNCTIONS ========== */

function renderSidebar() {
  const nav = document.getElementById('sidebarNav');
  let html = '';
  INDUSTRY_DATA.forEach((cat, ci) => {
    html += `<div class="sidebar-group">
      <div class="sidebar-group-title" onclick="toggleSidebarGroup(${ci})">
        <span class="arrow ${ci === 0 ? 'open' : ''}" id="arrow-${ci}">â–¶</span> ${cat.cat}
      </div>
      <div class="sidebar-children ${ci === 0 ? 'open' : ''}" id="sg-${ci}">`;
    cat.chains.forEach(ch => {
      html += `<a class="sidebar-item" href="#chain/${encodeURIComponent(ch.name)}/äº§ä¸šé“¾" target="_blank">${ch.name}</a>`;
    });
    html += `</div></div>`;
  });
  nav.innerHTML = html;
}

function renderNavCards() {
  const container = document.getElementById('navCardsContainer');
  let html = '';
  INDUSTRY_DATA.forEach((cat, ci) => {
    html += `<div class="category-section" id="cat-${ci}">
      <div class="category-title">${cat.cat}</div>
      <div class="cards-grid">`;
    cat.chains.forEach(ch => {
      html += `<a class="industry-card" href="#chain/${encodeURIComponent(ch.name)}/äº§ä¸šé“¾" target="_blank">
        <div class="card-icon">${ch.icon}</div>
        <div class="card-info">
          <div class="card-name">${ch.name}</div>
          <div class="card-count">ä¼ä¸š <span>${ch.count.toLocaleString()}</span> å®¶</div>
        </div>
      </a>`;
    });
    html += `</div></div>`;
  });
  container.innerHTML = html;
}

function renderRegionTable() {
  const tbody = document.getElementById('regionTableBody');
  let html = '';
  let totalChain = 0, totalKey = 0, totalSci = 0;
  REGION_DATA.forEach(r => {
    const rankClass = r.rank <= 3 ? `rank-${r.rank}` : '';
    html += `<tr>
      <td><span class="rank ${rankClass}">${r.rank}</span></td>
      <td>${r.name}</td>
      <td class="num">${r.chain.toLocaleString()}</td>
      <td class="num">${r.key.toLocaleString()}</td>
      <td class="num">${r.sci.toLocaleString()}</td>
    </tr>`;
    totalChain += r.chain; totalKey += r.key; totalSci += r.sci;
  });
  tbody.innerHTML = html;
  // æ›´æ–°å›ºå®šåˆè®¡è¡Œ
  const totalRow = document.getElementById('regionTableTotalRow');
  if (totalRow) {
    totalRow.innerHTML = `<td>åˆè®¡</td><td></td>
      <td class="num">${totalChain.toLocaleString()}</td>
      <td class="num">${totalKey.toLocaleString()}</td>
      <td class="num">${totalSci.toLocaleString()}</td>`;
  }
}

function renderScitechGrid() {
  const grid = document.getElementById('scitechGrid');
  let html = '';
  SCITECH_TAGS.forEach(t => {
    html += `<div class="scitech-card">
      <div class="tag-name">${t.name}</div>
      <div class="tag-value">${t.value.toLocaleString()}<span class="tag-unit">å®¶</span></div>
    </div>`;
  });
  grid.innerHTML = html;
}

function renderCrossTable() {
  const table = document.getElementById('crossTable');
  let html = '<thead><tr><th>åœ°åŒº</th>';
  CROSS_DATA.cols.forEach(c => { html += `<th>${c}</th>`; });
  html += '</tr></thead><tbody>';
  CROSS_DATA.rows.forEach(r => {
    html += `<tr><th>${r.name}</th>`;
    r.vals.forEach((v, i) => {
      const cls = v > 4000 ? 'highlight' : '';
      html += `<td class="${cls}">${v.toLocaleString()}</td>`;
    });
    html += '</tr>';
  });
  html += '</tbody>';
  table.innerHTML = html;
}

function renderChainPath(name, level) {
  const list = document.getElementById('chainPathList');
  let html = '';
  if (level === 'äº§ä¸š') {
    // äº§ä¸šä¸»é¡µï¼šäº§ä¸šé“¾ â†’ å½“å‰äº§ä¸š
    html = `<div class="chain-path-item">
      <a href="#chain/${encodeURIComponent('æ–°èƒ½æºæ±½è½¦')}/äº§ä¸šé“¾" target="_blank">æ–°èƒ½æºæ±½è½¦</a>
      <span class="path-sep">â€º</span>
      <strong style="color:var(--color-neutral-800);">${name}</strong>
    </div>`;
  } else if (level === 'ç»†åˆ†è¡Œä¸š') {
    // ç»†åˆ†è¡Œä¸šä¸»é¡µï¼šäº§ä¸šé“¾ â†’ äº§ä¸š â†’ å½“å‰ç»†åˆ†è¡Œä¸š
    // æŸ¥æ‰¾è¯¥ç»†åˆ†è¡Œä¸šå½’å±çš„äº§ä¸š
    let parentIndustry = '';
    CHAIN_PATH.forEach(p => {
      if (p.subs.includes(name)) parentIndustry = p.industry;
    });
    if (!parentIndustry) parentIndustry = 'å‚¨èƒ½ææ–™'; // fallback
    html = `<div class="chain-path-item">
      <a href="#chain/${encodeURIComponent('æ–°èƒ½æºæ±½è½¦')}/äº§ä¸šé“¾" target="_blank">æ–°èƒ½æºæ±½è½¦</a>
      <span class="path-sep">â€º</span>
      <a href="#chain/${encodeURIComponent(parentIndustry)}/äº§ä¸š" target="_blank">${parentIndustry}</a>
      <span class="path-sep">â€º</span>
      <strong style="color:var(--color-neutral-800);">${name}</strong>
    </div>`;
  }
  list.innerHTML = html;
}

function renderGraph(highlightNode) {
  const container = document.getElementById('graphContainer');
  const hl = highlightNode || '';

  let html = '<div class="graph-flow">';

  // ä¸Šæ¸¸
  html += '<div class="graph-stage">';
  html += '<div class="graph-stage-label">ä¸Š æ¸¸</div>';
  const upstream = [
    { group: 'å‚¨èƒ½ææ–™', nodes: ['æ­£æææ–™', 'è´Ÿæææ–™', 'ç”µè§£æ¶²', 'éš”è†œ'] },
    { group: 'å…³é”®éƒ¨ä»¶', nodes: ['ç”µæœºææ–™', 'è½»é‡åŒ–ææ–™', 'ç”µå­å…ƒå™¨ä»¶'] }
  ];
  upstream.forEach(g => {
    html += `<div class="graph-group"><div class="graph-group-title">${g.group}</div><div class="graph-nodes">`;
    g.nodes.forEach(n => {
      const cur = n === hl ? ' current' : '';
      html += `<div class="graph-node level-sub${cur}" onclick="window.open('#chain/${encodeURIComponent(n)}/ç»†åˆ†è¡Œä¸š','_blank')">${n}</div>`;
    });
    html += '</div></div>';
  });
  html += '</div>';

  // Connector
  html += '<div class="graph-connector"></div>';

  // ä¸­æ¸¸
  html += '<div class="graph-stage">';
  html += '<div class="graph-stage-label">ä¸­ æ¸¸</div>';
  const midstream = [
    { group: 'æ ¸å¿ƒé›¶éƒ¨ä»¶', nodes: ['åŠ¨åŠ›ç”µæ± ', 'ç”µæœºç”µæ§', 'ç”µæ± é…ä»¶äº§å“'] },
    { group: 'æ•´è½¦åˆ¶é€ ', nodes: ['çº¯ç”µåŠ¨æ±½è½¦', 'æ··åŠ¨æ±½è½¦', 'æ°¢ç‡ƒæ–™æ±½è½¦'] }
  ];
  midstream.forEach(g => {
    html += `<div class="graph-group"><div class="graph-group-title">${g.group}</div><div class="graph-nodes">`;
    g.nodes.forEach(n => {
      const cur = n === hl ? ' current' : '';
      const level = ['åŠ¨åŠ›ç”µæ± ', 'ç”µæœºç”µæ§', 'æ•´è½¦åˆ¶é€ '].includes(n) ? 'level-industry' : 'level-sub';
      const nodeLevel = level === 'level-industry' ? 'äº§ä¸š' : 'ç»†åˆ†è¡Œä¸š';
      html += `<div class="graph-node ${level}${cur}" onclick="window.open('#chain/${encodeURIComponent(n)}/${nodeLevel}','_blank')">${n}</div>`;
    });
    html += '</div></div>';
  });
  html += '</div>';

  // Connector
  html += '<div class="graph-connector"></div>';

  // ä¸‹æ¸¸
  html += '<div class="graph-stage">';
  html += '<div class="graph-stage-label">ä¸‹ æ¸¸</div>';
  const downstream = [
    { group: 'æœåŠ¡åŠåº”ç”¨', nodes: ['å……æ¢ç”µæœåŠ¡', 'æ±½è½¦åå¸‚åœº', 'å‡ºè¡ŒæœåŠ¡', 'äºŒæ‰‹è½¦'] }
  ];
  downstream.forEach(g => {
    html += `<div class="graph-group"><div class="graph-group-title">${g.group}</div><div class="graph-nodes">`;
    g.nodes.forEach(n => {
      const cur = n === hl ? ' current' : '';
      html += `<div class="graph-node level-sub${cur}" onclick="window.open('#chain/${encodeURIComponent(n)}/ç»†åˆ†è¡Œä¸š','_blank')">${n}</div>`;
    });
    html += '</div></div>';
  });
  html += '</div>';

  html += '</div>';

  // Center chain node
  html = `<div style="text-align:center;margin-bottom:20px;">
    <div class="graph-node level-chain" style="display:inline-block;">${hl ? 'æ–°èƒ½æºæ±½è½¦äº§ä¸šé“¾' : 'æ–°èƒ½æºæ±½è½¦äº§ä¸šé“¾'}</div>
    ${hl ? `<div style="margin-top:8px;font-size:12px;color:var(--color-gold-400);font-weight:600;">ğŸ“ å½“å‰ä½ç½®ï¼š${hl}</div>` : ''}
  </div>` + html;

  container.innerHTML = html;
}

function renderEntTable() {
  const tbody = document.getElementById('entTableBody');
  let html = '';
  ENTERPRISES.forEach((e, i) => {
    html += `<tr>
      <td>${i + 1}</td>
      <td><span class="ent-name">${e.name}</span></td>
      <td>${e.alias}</td>
      <td>${e.legal}</td>
      <td>${e.city}</td>
      <td>${e.date}</td>
      <td class="num">${e.capital.toLocaleString()}</td>
      <td>${e.industry}</td>
    </tr>`;
  });
  tbody.innerHTML = html;
}

function renderKeyEntTable() {
  const tbody = document.getElementById('keyEntTableBody');
  let html = '';
  KEY_ENTERPRISES.forEach((e, i) => {
    const tags = e.tags.map(t => `<span class="ent-tag">${t}</span>`).join('');
    html += `<tr>
      <td>${i + 1}</td>
      <td><span class="ent-name">${e.name}</span></td>
      <td>${e.legal}</td>
      <td>${e.city}</td>
      <td>${e.date}</td>
      <td class="num">${e.capital.toLocaleString()}</td>
      <td>${e.industry}</td>
      <td><div class="tags">${tags}</div></td>
    </tr>`;
  });
  tbody.innerHTML = html;
}

/* ========== INTERACTIONS ========== */

function showPage(pageId) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  if (pageId === 'nav') {
    document.getElementById('page-nav').classList.add('active');
  } else {
    document.getElementById('page-chain').classList.add('active');
  }
  window.scrollTo(0, 0);
}

function openChainPage(name, level) {
  document.getElementById('chainPageTitle').textContent = name;
  document.getElementById('chainLevelTag').textContent = level;
  document.getElementById('chainBreadcrumb').textContent = name;

  // Show/hide chain path and node distribution based on level
  const pathModule = document.getElementById('moduleChainPath');
  const nodeModule = document.getElementById('moduleNodeDist');
  if (level === 'äº§ä¸šé“¾') {
    pathModule.style.display = 'none';  // äº§ä¸šé“¾ä¸»é¡µä¸å±•ç¤ºé“¾è·¯
    nodeModule.style.display = 'block';
  } else if (level === 'äº§ä¸š') {
    pathModule.style.display = 'block';
    nodeModule.style.display = 'block';
    renderChainPath(name, level);  // é‡æ–°æ¸²æŸ“é“¾è·¯
  } else {
    pathModule.style.display = 'block';
    nodeModule.style.display = 'none'; // ç»†åˆ†è¡Œä¸šæ— èŠ‚ç‚¹åˆ†å¸ƒ
    renderChainPath(name, level);  // é‡æ–°æ¸²æŸ“é“¾è·¯
  }

  // Update graph highlight
  renderGraph(level !== 'äº§ä¸šé“¾' ? name : '');

  // Update sidebar active
  document.querySelectorAll('.sidebar-item').forEach(item => {
    item.classList.toggle('active', item.textContent.trim() === name);
  });

  showPage('chain');

  // Reset tab to overview
  switchTab('overview');
}

function toggleMoreFilter(btn) {
  var bar = btn.closest('.filter-bar');
  var groups = bar.querySelectorAll('.filter-group-extra');
  var showing = groups[0].classList.contains('show');
  groups.forEach(function(g) { g.classList.toggle('show'); });
  btn.textContent = showing ? 'â–¶ æ›´å¤šç­›é€‰' : 'â–¼ æ”¶èµ·ç­›é€‰';
}

function goUpLevel() {
  var level = document.getElementById('chainLevelTag').textContent;
  var name = document.getElementById('chainPageTitle').textContent;
  if (level === 'ç»†åˆ†è¡Œä¸š') {
    // ç»†åˆ†è¡Œä¸š â†’ è¿”å›æ‰€å±äº§ä¸š
    var parentIndustry = '';
    CHAIN_PATH.forEach(function(p) {
      if (p.subs.includes(name)) parentIndustry = p.industry;
    });
    if (parentIndustry) {
      location.hash = '#chain/' + encodeURIComponent(parentIndustry) + '/äº§ä¸š';
    } else {
      location.hash = '#chain/' + encodeURIComponent('æ–°èƒ½æºæ±½è½¦') + '/äº§ä¸šé“¾';
    }
  } else if (level === 'äº§ä¸š') {
    // äº§ä¸š â†’ è¿”å›æ‰€å±äº§ä¸šé“¾
    var parentChain = '';
    CHAIN_PATH.forEach(function(p) {
      if (p.industry === name) parentChain = p.chain;
    });
    if (parentChain) {
      location.hash = '#chain/' + encodeURIComponent(parentChain) + '/äº§ä¸šé“¾';
    } else {
      location.hash = '#chain/' + encodeURIComponent('æ–°èƒ½æºæ±½è½¦') + '/äº§ä¸šé“¾';
    }
  } else {
    // äº§ä¸šé“¾ â†’ è¿”å›æ¿å—é¦–é¡µ
    showPage('nav');
    location.hash = '';
  }
}

function toggleDesc() {
  const desc = document.getElementById('chainDescText');
  const text = document.getElementById('descToggleText');
  const icon = document.getElementById('descToggleIcon');
  if (desc.classList.contains('collapsed')) {
    desc.classList.remove('collapsed');
    desc.style.maxHeight = 'none';
    text.textContent = 'æ”¶èµ·';
    icon.textContent = 'â–²';
  } else {
    desc.classList.add('collapsed');
    desc.style.maxHeight = '26px';
    text.textContent = 'å±•å¼€æŸ¥çœ‹æ›´å¤š';
    icon.textContent = 'â–¼';
  }
}

function switchTab(tabId) {
  document.querySelectorAll('#chainTabNav .tab-item').forEach(t => {
    t.classList.toggle('active', t.dataset.tab === tabId);
  });
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  document.getElementById('tab-' + tabId).classList.add('active');
}

function toggleSidebarGroup(idx) {
  const children = document.getElementById('sg-' + idx);
  const arrow = document.getElementById('arrow-' + idx);
  children.classList.toggle('open');
  arrow.classList.toggle('open');
}

function onRegionChange() {
  const val = document.getElementById('regionProvince').value;
  document.getElementById('regionDisplay').textContent = val || 'å…¨å›½';
}

/* ========== TAB CLICK BINDINGS ========== */
document.addEventListener('click', function(e) {
  // Main tabs
  if (e.target.classList.contains('tab-item') && e.target.closest('#chainTabNav')) {
    switchTab(e.target.dataset.tab);
  }
  // Key enterprise sub tabs
  if (e.target.classList.contains('key-ent-tab')) {
    document.querySelectorAll('.key-ent-tab').forEach(t => t.classList.remove('active'));
    e.target.classList.add('active');
    var keyEntDescs = {
      pillar: '<strong style="color:var(--color-neutral-800);">æ”¯æŸ±ä¼ä¸š</strong>ï¼šåœ¨å½“å‰äº§ä¸šé“¾ä¸­è§„æ¨¡è¾ƒå¤§ã€æŠ—é£é™©èƒ½åŠ›è¾ƒå¼ºä¸”å¯¹ä¸Šä¸‹æ¸¸ä¾›éœ€ç¨³å®šèµ·å…³é”®ä½œç”¨çš„ä¼ä¸šã€‚',
      important: '<strong style="color:var(--color-neutral-800);">é‡è¦ä¼ä¸š</strong>ï¼šåœ¨å½“å‰äº§ä¸šé“¾ä¸­å…·æœ‰è¾ƒå¼ºæŠ€æœ¯åˆ›æ–°èƒ½åŠ›æˆ–å¸‚åœºå½±å“åŠ›ï¼Œå¯¹äº§ä¸šå‘å±•å…·æœ‰é‡è¦æ¨åŠ¨ä½œç”¨çš„ä¼ä¸šã€‚',
      potential: '<strong style="color:var(--color-neutral-800);">æ½œåŠ›ä¼ä¸š</strong>ï¼šåœ¨å½“å‰äº§ä¸šé“¾ä¸­æˆé•¿æ€§è¾ƒå¥½ã€åˆ›æ–°æ´»è·ƒåº¦è¾ƒé«˜ï¼Œå…·å¤‡æœªæ¥æˆä¸ºé‡è¦æˆ–æ”¯æŸ±ä¼ä¸šæ½œè´¨çš„ä¼ä¸šã€‚'
    };
    var infoDiv = document.getElementById('keyEntInfo');
    if (infoDiv && keyEntDescs[e.target.dataset.keytab]) {
      infoDiv.innerHTML = keyEntDescs[e.target.dataset.keytab];
    }
  }
  // Pagination (visual only)
  if (e.target.classList.contains('page-btn') && !e.target.classList.contains('disabled')) {
    const parent = e.target.closest('.pagination');
    parent.querySelectorAll('.page-btn').forEach(b => b.classList.remove('active'));
    e.target.classList.add('active');
  }
});

/* ========== HASH ROUTING (New Tab Support) ========== */
function handleHash() {
  const hash = location.hash;
  if (hash.startsWith('#chain/')) {
    const parts = hash.replace('#chain/', '').split('/');
    const name = decodeURIComponent(parts[0]);
    const level = decodeURIComponent(parts[1] || 'äº§ä¸šé“¾');
    openChainPage(name, level);
  } else {
    showPage('nav');
  }
}
window.addEventListener('hashchange', handleHash);

/* ========== INIT ========== */
function init() {
  renderSidebar();
  renderNavCards();
  renderRegionTable();
  renderScitechGrid();
  renderCrossTable();
  renderChainPath();
  renderGraph();
  renderEntTable();
  renderKeyEntTable();
  handleHash();
}
document.addEventListener('DOMContentLoaded', init);

function downloadGraphPNG() {
  const container = document.getElementById('graphContainer');
  const title = document.getElementById('chainPageTitle').textContent;
  const btn = event.target.closest('.btn-tool');
  const origText = btn.textContent;
  btn.textContent = 'â³ ç”Ÿæˆä¸­...';
  html2canvas(container, {
    backgroundColor: '#ffffff',
    scale: 2,
    useCORS: true
  }).then(canvas => {
    const link = document.createElement('a');
    link.download = title + '_äº§ä¸šå›¾è°±.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
    btn.textContent = origText;
  }).catch(() => {
    btn.textContent = origText;
    alert('ä¸‹è½½å¤±è´¥ï¼Œè¯·é‡è¯•');
  });
}
</script>
</body>
</html>
